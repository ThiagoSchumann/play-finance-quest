(function(Ze,pe){typeof exports=="object"&&typeof module<"u"?pe(exports):typeof define=="function"&&define.amd?define(["exports"],pe):(Ze=typeof globalThis<"u"?globalThis:Ze||self,pe(Ze.RpgCompiler={}))})(this,function(Ze){"use strict";const pe={existsSync:(...e)=>window.fs.existsSync(...e),readFileSync:(...e)=>window.fs.readFileSync(...e),readdirSync:(...e)=>window.fs.readdirSync(...e),copyFileSync:(...e)=>window.fs.copyFileSync(...e)};function vs(e,t){for(var r=0,n=e.length-1;n>=0;n--){var s=e[n];s==="."?e.splice(n,1):s===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var Oa=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,tn=function(e){return Oa.exec(e).slice(1)};function rn(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;e=n+"/"+e,t=n.charAt(0)==="/"}return e=vs(nn(e.split("/"),function(s){return!!s}),!t).join("/"),(t?"/":"")+e||"."}function $s(e){var t=_s(e),r=Da(e,-1)==="/";return e=vs(nn(e.split("/"),function(n){return!!n}),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function _s(e){return e.charAt(0)==="/"}function Na(){var e=Array.prototype.slice.call(arguments,0);return $s(nn(e,function(t,r){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Ta(e,t){e=rn(e).substr(1),t=rn(t).substr(1);function r(i){for(var u=0;u<i.length&&i[u]==="";u++);for(var l=i.length-1;l>=0&&i[l]==="";l--);return u>l?[]:i.slice(u,l-u+1)}for(var n=r(e.split("/")),s=r(t.split("/")),o=Math.min(n.length,s.length),a=o,c=0;c<o;c++)if(n[c]!==s[c]){a=c;break}for(var f=[],c=a;c<n.length;c++)f.push("..");return f=f.concat(s.slice(a)),f.join("/")}var Ra="/",Ca=":";function ja(e){var t=tn(e),r=t[0],n=t[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)}function Aa(e,t){var r=tn(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r}function Ia(e){return tn(e)[3]}const ye={extname:Ia,basename:Aa,dirname:ja,sep:Ra,delimiter:Ca,relative:Ta,join:Na,isAbsolute:_s,normalize:$s,resolve:rn};function nn(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var Da="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)};const ka=e=>window.imagesLoaded[e];var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ws(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ft={},Fa={get exports(){return Ft},set exports(e){Ft=e}},bs={},Ce={},gt={},Ut={},W={},zt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(E){if(super(),!e.IDENTIFIER.test(E))throw new Error("CodeGen: name must be a valid identifier");this.str=E}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(E){super(),this._items=typeof E=="string"?[E]:E}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const E=this._items[0];return E===""||E==='""'}get str(){var E;return(E=this._str)!==null&&E!==void 0?E:this._str=this._items.reduce((O,j)=>`${O}${j}`,"")}get names(){var E;return(E=this._names)!==null&&E!==void 0?E:this._names=this._items.reduce((O,j)=>(j instanceof r&&(O[j.str]=(O[j.str]||0)+1),O),{})}}e._Code=n,e.nil=new n("");function s(m,...E){const O=[m[0]];let j=0;for(;j<E.length;)c(O,E[j]),O.push(m[++j]);return new n(O)}e._=s;const o=new n("+");function a(m,...E){const O=[b(m[0])];let j=0;for(;j<E.length;)O.push(o),c(O,E[j]),O.push(o,b(m[++j]));return f(O),new n(O)}e.str=a;function c(m,E){E instanceof n?m.push(...E._items):E instanceof r?m.push(E):m.push(l(E))}e.addCodeArg=c;function f(m){let E=1;for(;E<m.length-1;){if(m[E]===o){const O=i(m[E-1],m[E+1]);if(O!==void 0){m.splice(E-1,3,O);continue}m[E++]="+"}E++}}function i(m,E){if(E==='""')return m;if(m==='""')return E;if(typeof m=="string")return E instanceof r||m[m.length-1]!=='"'?void 0:typeof E!="string"?`${m.slice(0,-1)}${E}"`:E[0]==='"'?m.slice(0,-1)+E.slice(1):void 0;if(typeof E=="string"&&E[0]==='"'&&!(m instanceof r))return`"${m}${E.slice(1)}`}function u(m,E){return E.emptyStr()?m:m.emptyStr()?E:a`${m}${E}`}e.strConcat=u;function l(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:b(Array.isArray(m)?m.join(","):m)}function w(m){return new n(b(m))}e.stringify=w;function b(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=b;function h(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new n(`.${m}`):s`[${m}]`}e.getProperty=h;function y(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new n(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=y;function _(m){return new n(m.toString())}e.regexpCode=_})(zt);var sn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=zt;class r extends Error{constructor(i){super(`CodeGen: "code" for ${i} not defined`),this.value=i.value}}var n;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(n=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:i,parent:u}={}){this._names={},this._prefixes=i,this._parent=u}toName(i){return i instanceof t.Name?i:this.name(i)}name(i){return new t.Name(this._newName(i))}_newName(i){const u=this._names[i]||this._nameGroup(i);return`${i}${u.index++}`}_nameGroup(i){var u,l;if(!((l=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||l===void 0)&&l.has(i)||this._prefixes&&!this._prefixes.has(i))throw new Error(`CodeGen: prefix "${i}" is not allowed in this scope`);return this._names[i]={prefix:i,index:0}}}e.Scope=s;class o extends t.Name{constructor(i,u){super(u),this.prefix=i}setValue(i,{property:u,itemIndex:l}){this.value=i,this.scopePath=(0,t._)`.${new t.Name(u)}[${l}]`}}e.ValueScopeName=o;const a=(0,t._)`\n`;class c extends s{constructor(i){super(i),this._values={},this._scope=i.scope,this.opts={...i,_n:i.lines?a:t.nil}}get(){return this._scope}name(i){return new o(i,this._newName(i))}value(i,u){var l;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const w=this.toName(i),{prefix:b}=w,h=(l=u.key)!==null&&l!==void 0?l:u.ref;let y=this._values[b];if(y){const E=y.get(h);if(E)return E}else y=this._values[b]=new Map;y.set(h,w);const _=this._scope[b]||(this._scope[b]=[]),m=_.length;return _[m]=u.ref,w.setValue(u,{property:b,itemIndex:m}),w}getValue(i,u){const l=this._values[i];if(l)return l.get(u)}scopeRefs(i,u=this._values){return this._reduceValues(u,l=>{if(l.scopePath===void 0)throw new Error(`CodeGen: name "${l}" has no value`);return(0,t._)`${i}${l.scopePath}`})}scopeCode(i=this._values,u,l){return this._reduceValues(i,w=>{if(w.value===void 0)throw new Error(`CodeGen: name "${w}" has no value`);return w.value.code},u,l)}_reduceValues(i,u,l={},w){let b=t.nil;for(const h in i){const y=i[h];if(!y)continue;const _=l[h]=l[h]||new Map;y.forEach(m=>{if(_.has(m))return;_.set(m,n.Started);let E=u(m);if(E){const O=this.opts.es5?e.varKinds.var:e.varKinds.const;b=(0,t._)`${b}${O} ${m} = ${E};${this.opts._n}`}else if(E=w==null?void 0:w(m))b=(0,t._)`${b}${E}${this.opts._n}`;else throw new r(m);_.set(m,n.Completed)})}return b}}e.ValueScope=c})(sn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=zt,r=sn;var n=zt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=sn;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(d,v){return this}}class a extends o{constructor(d,v,A){super(),this.varKind=d,this.name=v,this.rhs=A}render({es5:d,_n:v}){const A=d?r.varKinds.var:this.varKind,z=this.rhs===void 0?"":` = ${this.rhs}`;return`${A} ${this.name}${z};`+v}optimizeNames(d,v){if(d[this.name.str])return this.rhs&&(this.rhs=oe(this.rhs,d,v)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class c extends o{constructor(d,v,A){super(),this.lhs=d,this.rhs=v,this.sideEffects=A}render({_n:d}){return`${this.lhs} = ${this.rhs};`+d}optimizeNames(d,v){if(!(this.lhs instanceof t.Name&&!d[this.lhs.str]&&!this.sideEffects))return this.rhs=oe(this.rhs,d,v),this}get names(){const d=this.lhs instanceof t.Name?{}:{...this.lhs.names};return he(d,this.rhs)}}class f extends c{constructor(d,v,A,z){super(d,A,z),this.op=v}render({_n:d}){return`${this.lhs} ${this.op}= ${this.rhs};`+d}}class i extends o{constructor(d){super(),this.label=d,this.names={}}render({_n:d}){return`${this.label}:`+d}}class u extends o{constructor(d){super(),this.label=d,this.names={}}render({_n:d}){return`break${this.label?` ${this.label}`:""};`+d}}class l extends o{constructor(d){super(),this.error=d}render({_n:d}){return`throw ${this.error};`+d}get names(){return this.error.names}}class w extends o{constructor(d){super(),this.code=d}render({_n:d}){return`${this.code};`+d}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(d,v){return this.code=oe(this.code,d,v),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class b extends o{constructor(d=[]){super(),this.nodes=d}render(d){return this.nodes.reduce((v,A)=>v+A.render(d),"")}optimizeNodes(){const{nodes:d}=this;let v=d.length;for(;v--;){const A=d[v].optimizeNodes();Array.isArray(A)?d.splice(v,1,...A):A?d[v]=A:d.splice(v,1)}return d.length>0?this:void 0}optimizeNames(d,v){const{nodes:A}=this;let z=A.length;for(;z--;){const V=A[z];V.optimizeNames(d,v)||(Ne(d,V.names),A.splice(z,1))}return A.length>0?this:void 0}get names(){return this.nodes.reduce((d,v)=>B(d,v.names),{})}}class h extends b{render(d){return"{"+d._n+super.render(d)+"}"+d._n}}class y extends b{}class _ extends h{}_.kind="else";class m extends h{constructor(d,v){super(v),this.condition=d}render(d){let v=`if(${this.condition})`+super.render(d);return this.else&&(v+="else "+this.else.render(d)),v}optimizeNodes(){super.optimizeNodes();const d=this.condition;if(d===!0)return this.nodes;let v=this.else;if(v){const A=v.optimizeNodes();v=this.else=Array.isArray(A)?new _(A):A}if(v)return d===!1?v instanceof m?v:v.nodes:this.nodes.length?this:new m(ft(d),v instanceof m?[v]:v.nodes);if(!(d===!1||!this.nodes.length))return this}optimizeNames(d,v){var A;if(this.else=(A=this.else)===null||A===void 0?void 0:A.optimizeNames(d,v),!!(super.optimizeNames(d,v)||this.else))return this.condition=oe(this.condition,d,v),this}get names(){const d=super.names;return he(d,this.condition),this.else&&B(d,this.else.names),d}}m.kind="if";class E extends h{}E.kind="for";class O extends E{constructor(d){super(),this.iteration=d}render(d){return`for(${this.iteration})`+super.render(d)}optimizeNames(d,v){if(super.optimizeNames(d,v))return this.iteration=oe(this.iteration,d,v),this}get names(){return B(super.names,this.iteration.names)}}class j extends E{constructor(d,v,A,z){super(),this.varKind=d,this.name=v,this.from=A,this.to=z}render(d){const v=d.es5?r.varKinds.var:this.varKind,{name:A,from:z,to:V}=this;return`for(${v} ${A}=${z}; ${A}<${V}; ${A}++)`+super.render(d)}get names(){const d=he(super.names,this.from);return he(d,this.to)}}class k extends E{constructor(d,v,A,z){super(),this.loop=d,this.varKind=v,this.name=A,this.iterable=z}render(d){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(d)}optimizeNames(d,v){if(super.optimizeNames(d,v))return this.iterable=oe(this.iterable,d,v),this}get names(){return B(super.names,this.iterable.names)}}class S extends h{constructor(d,v,A){super(),this.name=d,this.args=v,this.async=A}render(d){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(d)}}S.kind="func";class C extends b{render(d){return"return "+super.render(d)}}C.kind="return";class M extends h{render(d){let v="try"+super.render(d);return this.catch&&(v+=this.catch.render(d)),this.finally&&(v+=this.finally.render(d)),v}optimizeNodes(){var d,v;return super.optimizeNodes(),(d=this.catch)===null||d===void 0||d.optimizeNodes(),(v=this.finally)===null||v===void 0||v.optimizeNodes(),this}optimizeNames(d,v){var A,z;return super.optimizeNames(d,v),(A=this.catch)===null||A===void 0||A.optimizeNames(d,v),(z=this.finally)===null||z===void 0||z.optimizeNames(d,v),this}get names(){const d=super.names;return this.catch&&B(d,this.catch.names),this.finally&&B(d,this.finally.names),d}}class F extends h{constructor(d){super(),this.error=d}render(d){return`catch(${this.error})`+super.render(d)}}F.kind="catch";class L extends h{render(d){return"finally"+super.render(d)}}L.kind="finally";class x{constructor(d,v={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...v,_n:v.lines?`
`:""},this._extScope=d,this._scope=new r.Scope({parent:d}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(d){return this._scope.name(d)}scopeName(d){return this._extScope.name(d)}scopeValue(d,v){const A=this._extScope.value(d,v);return(this._values[A.prefix]||(this._values[A.prefix]=new Set)).add(A),A}getScopeValue(d,v){return this._extScope.getValue(d,v)}scopeRefs(d){return this._extScope.scopeRefs(d,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(d,v,A,z){const V=this._scope.toName(v);return A!==void 0&&z&&(this._constants[V.str]=A),this._leafNode(new a(d,V,A)),V}const(d,v,A){return this._def(r.varKinds.const,d,v,A)}let(d,v,A){return this._def(r.varKinds.let,d,v,A)}var(d,v,A){return this._def(r.varKinds.var,d,v,A)}assign(d,v,A){return this._leafNode(new c(d,v,A))}add(d,v){return this._leafNode(new f(d,e.operators.ADD,v))}code(d){return typeof d=="function"?d():d!==t.nil&&this._leafNode(new w(d)),this}object(...d){const v=["{"];for(const[A,z]of d)v.length>1&&v.push(","),v.push(A),(A!==z||this.opts.es5)&&(v.push(":"),(0,t.addCodeArg)(v,z));return v.push("}"),new t._Code(v)}if(d,v,A){if(this._blockNode(new m(d)),v&&A)this.code(v).else().code(A).endIf();else if(v)this.code(v).endIf();else if(A)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(d){return this._elseNode(new m(d))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(m,_)}_for(d,v){return this._blockNode(d),v&&this.code(v).endFor(),this}for(d,v){return this._for(new O(d),v)}forRange(d,v,A,z,V=this.opts.es5?r.varKinds.var:r.varKinds.let){const Y=this._scope.toName(d);return this._for(new j(V,Y,v,A),()=>z(Y))}forOf(d,v,A,z=r.varKinds.const){const V=this._scope.toName(d);if(this.opts.es5){const Y=v instanceof t.Name?v:this.var("_arr",v);return this.forRange("_i",0,(0,t._)`${Y}.length`,Z=>{this.var(V,(0,t._)`${Y}[${Z}]`),A(V)})}return this._for(new k("of",z,V,v),()=>A(V))}forIn(d,v,A,z=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(d,(0,t._)`Object.keys(${v})`,A);const V=this._scope.toName(d);return this._for(new k("in",z,V,v),()=>A(V))}endFor(){return this._endBlockNode(E)}label(d){return this._leafNode(new i(d))}break(d){return this._leafNode(new u(d))}return(d){const v=new C;if(this._blockNode(v),this.code(d),v.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(d,v,A){if(!v&&!A)throw new Error('CodeGen: "try" without "catch" and "finally"');const z=new M;if(this._blockNode(z),this.code(d),v){const V=this.name("e");this._currNode=z.catch=new F(V),v(V)}return A&&(this._currNode=z.finally=new L,this.code(A)),this._endBlockNode(F,L)}throw(d){return this._leafNode(new l(d))}block(d,v){return this._blockStarts.push(this._nodes.length),d&&this.code(d).endBlock(v),this}endBlock(d){const v=this._blockStarts.pop();if(v===void 0)throw new Error("CodeGen: not in self-balancing block");const A=this._nodes.length-v;if(A<0||d!==void 0&&A!==d)throw new Error(`CodeGen: wrong number of nodes: ${A} vs ${d} expected`);return this._nodes.length=v,this}func(d,v=t.nil,A,z){return this._blockNode(new S(d,v,A)),z&&this.code(z).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(d=1){for(;d-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(d){return this._currNode.nodes.push(d),this}_blockNode(d){this._currNode.nodes.push(d),this._nodes.push(d)}_endBlockNode(d,v){const A=this._currNode;if(A instanceof d||v&&A instanceof v)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${v?`${d.kind}/${v.kind}`:d.kind}"`)}_elseNode(d){const v=this._currNode;if(!(v instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=v.else=d,this}get _root(){return this._nodes[0]}get _currNode(){const d=this._nodes;return d[d.length-1]}set _currNode(d){const v=this._nodes;v[v.length-1]=d}}e.CodeGen=x;function B(N,d){for(const v in d)N[v]=(N[v]||0)+(d[v]||0);return N}function he(N,d){return d instanceof t._CodeOrName?B(N,d.names):N}function oe(N,d,v){if(N instanceof t.Name)return A(N);if(!z(N))return N;return new t._Code(N._items.reduce((V,Y)=>(Y instanceof t.Name&&(Y=A(Y)),Y instanceof t._Code?V.push(...Y._items):V.push(Y),V),[]));function A(V){const Y=v[V.str];return Y===void 0||d[V.str]!==1?V:(delete d[V.str],Y)}function z(V){return V instanceof t._Code&&V._items.some(Y=>Y instanceof t.Name&&d[Y.str]===1&&v[Y.str]!==void 0)}}function Ne(N,d){for(const v in d)N[v]=(N[v]||0)-(d[v]||0)}function ft(N){return typeof N=="boolean"||typeof N=="number"||N===null?!N:(0,t._)`!${D(N)}`}e.not=ft;const Tt=P(e.operators.AND);function or(...N){return N.reduce(Tt)}e.and=or;const Rt=P(e.operators.OR);function U(...N){return N.reduce(Rt)}e.or=U;function P(N){return(d,v)=>d===t.nil?v:v===t.nil?d:(0,t._)`${D(d)} ${N} ${D(v)}`}function D(N){return N instanceof t.Name?N:(0,t._)`(${N})`}}(W);var te={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=W,r=zt;function n(S){const C={};for(const M of S)C[M]=!0;return C}e.toHash=n;function s(S,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(o(S,C),!a(C,S.self.RULES.all))}e.alwaysValidSchema=s;function o(S,C=S.schema){const{opts:M,self:F}=S;if(!M.strictSchema||typeof C=="boolean")return;const L=F.RULES.keywords;for(const x in C)L[x]||k(S,`unknown keyword: "${x}"`)}e.checkUnknownRules=o;function a(S,C){if(typeof S=="boolean")return!S;for(const M in S)if(C[M])return!0;return!1}e.schemaHasRules=a;function c(S,C){if(typeof S=="boolean")return!S;for(const M in S)if(M!=="$ref"&&C.all[M])return!0;return!1}e.schemaHasRulesButRef=c;function f({topSchemaRef:S,schemaPath:C},M,F,L){if(!L){if(typeof M=="number"||typeof M=="boolean")return M;if(typeof M=="string")return(0,t._)`${M}`}return(0,t._)`${S}${C}${(0,t.getProperty)(F)}`}e.schemaRefOrVal=f;function i(S){return w(decodeURIComponent(S))}e.unescapeFragment=i;function u(S){return encodeURIComponent(l(S))}e.escapeFragment=u;function l(S){return typeof S=="number"?`${S}`:S.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=l;function w(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=w;function b(S,C){if(Array.isArray(S))for(const M of S)C(M);else C(S)}e.eachItem=b;function h({mergeNames:S,mergeToName:C,mergeValues:M,resultToName:F}){return(L,x,B,he)=>{const oe=B===void 0?x:B instanceof t.Name?(x instanceof t.Name?S(L,x,B):C(L,x,B),B):x instanceof t.Name?(C(L,B,x),x):M(x,B);return he===t.Name&&!(oe instanceof t.Name)?F(L,oe):oe}}e.mergeEvaluated={props:h({mergeNames:(S,C,M)=>S.if((0,t._)`${M} !== true && ${C} !== undefined`,()=>{S.if((0,t._)`${C} === true`,()=>S.assign(M,!0),()=>S.assign(M,(0,t._)`${M} || {}`).code((0,t._)`Object.assign(${M}, ${C})`))}),mergeToName:(S,C,M)=>S.if((0,t._)`${M} !== true`,()=>{C===!0?S.assign(M,!0):(S.assign(M,(0,t._)`${M} || {}`),_(S,M,C))}),mergeValues:(S,C)=>S===!0?!0:{...S,...C},resultToName:y}),items:h({mergeNames:(S,C,M)=>S.if((0,t._)`${M} !== true && ${C} !== undefined`,()=>S.assign(M,(0,t._)`${C} === true ? true : ${M} > ${C} ? ${M} : ${C}`)),mergeToName:(S,C,M)=>S.if((0,t._)`${M} !== true`,()=>S.assign(M,C===!0?!0:(0,t._)`${M} > ${C} ? ${M} : ${C}`)),mergeValues:(S,C)=>S===!0?!0:Math.max(S,C),resultToName:(S,C)=>S.var("items",C)})};function y(S,C){if(C===!0)return S.var("props",!0);const M=S.var("props",(0,t._)`{}`);return C!==void 0&&_(S,M,C),M}e.evaluatedPropsToName=y;function _(S,C,M){Object.keys(M).forEach(F=>S.assign((0,t._)`${C}${(0,t.getProperty)(F)}`,!0))}e.setEvaluated=_;const m={};function E(S,C){return S.scopeValue("func",{ref:C,code:m[C.code]||(m[C.code]=new r._Code(C.code))})}e.useFunc=E;var O;(function(S){S[S.Num=0]="Num",S[S.Str=1]="Str"})(O=e.Type||(e.Type={}));function j(S,C,M){if(S instanceof t.Name){const F=C===O.Num;return M?F?(0,t._)`"[" + ${S} + "]"`:(0,t._)`"['" + ${S} + "']"`:F?(0,t._)`"/" + ${S}`:(0,t._)`"/" + ${S}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return M?(0,t.getProperty)(S).toString():"/"+l(S)}e.getErrorPath=j;function k(S,C,M=S.opts.strictSchema){if(M){if(C=`strict mode: ${C}`,M===!0)throw new Error(C);S.self.logger.warn(C)}}e.checkStrictMode=k})(te);var De={};Object.defineProperty(De,"__esModule",{value:!0});const _e=W,Ua={data:new _e.Name("data"),valCxt:new _e.Name("valCxt"),instancePath:new _e.Name("instancePath"),parentData:new _e.Name("parentData"),parentDataProperty:new _e.Name("parentDataProperty"),rootData:new _e.Name("rootData"),dynamicAnchors:new _e.Name("dynamicAnchors"),vErrors:new _e.Name("vErrors"),errors:new _e.Name("errors"),this:new _e.Name("this"),self:new _e.Name("self"),scope:new _e.Name("scope"),json:new _e.Name("json"),jsonPos:new _e.Name("jsonPos"),jsonLen:new _e.Name("jsonLen"),jsonPart:new _e.Name("jsonPart")};De.default=Ua,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=W,r=te,n=De;e.keywordError={message:({keyword:_})=>(0,t.str)`must pass "${_}" keyword validation`},e.keyword$DataError={message:({keyword:_,schemaType:m})=>m?(0,t.str)`"${_}" keyword must be ${m} ($data)`:(0,t.str)`"${_}" keyword is invalid ($data)`};function s(_,m=e.keywordError,E,O){const{it:j}=_,{gen:k,compositeRule:S,allErrors:C}=j,M=l(_,m,E);O??(S||C)?f(k,M):i(j,(0,t._)`[${M}]`)}e.reportError=s;function o(_,m=e.keywordError,E){const{it:O}=_,{gen:j,compositeRule:k,allErrors:S}=O,C=l(_,m,E);f(j,C),k||S||i(O,n.default.vErrors)}e.reportExtraError=o;function a(_,m){_.assign(n.default.errors,m),_.if((0,t._)`${n.default.vErrors} !== null`,()=>_.if(m,()=>_.assign((0,t._)`${n.default.vErrors}.length`,m),()=>_.assign(n.default.vErrors,null)))}e.resetErrorsCount=a;function c({gen:_,keyword:m,schemaValue:E,data:O,errsCount:j,it:k}){if(j===void 0)throw new Error("ajv implementation error");const S=_.name("err");_.forRange("i",j,n.default.errors,C=>{_.const(S,(0,t._)`${n.default.vErrors}[${C}]`),_.if((0,t._)`${S}.instancePath === undefined`,()=>_.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(n.default.instancePath,k.errorPath))),_.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${k.errSchemaPath}/${m}`),k.opts.verbose&&(_.assign((0,t._)`${S}.schema`,E),_.assign((0,t._)`${S}.data`,O))})}e.extendErrors=c;function f(_,m){const E=_.const("err",m);_.if((0,t._)`${n.default.vErrors} === null`,()=>_.assign(n.default.vErrors,(0,t._)`[${E}]`),(0,t._)`${n.default.vErrors}.push(${E})`),_.code((0,t._)`${n.default.errors}++`)}function i(_,m){const{gen:E,validateName:O,schemaEnv:j}=_;j.$async?E.throw((0,t._)`new ${_.ValidationError}(${m})`):(E.assign((0,t._)`${O}.errors`,m),E.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function l(_,m,E){const{createErrors:O}=_.it;return O===!1?(0,t._)`{}`:w(_,m,E)}function w(_,m,E={}){const{gen:O,it:j}=_,k=[b(j,E),h(_,E)];return y(_,m,k),O.object(...k)}function b({errorPath:_},{instancePath:m}){const E=m?(0,t.str)`${_}${(0,r.getErrorPath)(m,r.Type.Str)}`:_;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,E)]}function h({keyword:_,it:{errSchemaPath:m}},{schemaPath:E,parentSchema:O}){let j=O?m:(0,t.str)`${m}/${_}`;return E&&(j=(0,t.str)`${j}${(0,r.getErrorPath)(E,r.Type.Str)}`),[u.schemaPath,j]}function y(_,{params:m,message:E},O){const{keyword:j,data:k,schemaValue:S,it:C}=_,{opts:M,propertyName:F,topSchemaRef:L,schemaPath:x}=C;O.push([u.keyword,j],[u.params,typeof m=="function"?m(_):m||(0,t._)`{}`]),M.messages&&O.push([u.message,typeof E=="function"?E(_):E]),M.verbose&&O.push([u.schema,S],[u.parentSchema,(0,t._)`${L}${x}`],[n.default.data,k]),F&&O.push([u.propertyName,F])}}(Ut),Object.defineProperty(gt,"__esModule",{value:!0}),gt.boolOrEmptySchema=gt.topBoolOrEmptySchema=void 0;const za=Ut,Va=W,La=De,qa={message:"boolean schema is false"};function Ha(e){const{gen:t,schema:r,validateName:n}=e;r===!1?Es(e,!1):typeof r=="object"&&r.$async===!0?t.return(La.default.data):(t.assign((0,Va._)`${n}.errors`,null),t.return(!0))}gt.topBoolOrEmptySchema=Ha;function Ka(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Es(e)):r.var(t,!0)}gt.boolOrEmptySchema=Ka;function Es(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,za.reportError)(s,qa,void 0,t)}var Vt={},at={};Object.defineProperty(at,"__esModule",{value:!0}),at.getRules=at.isJSONType=void 0;const Ba=["string","number","integer","boolean","null","object","array"],Ga=new Set(Ba);function Ja(e){return typeof e=="string"&&Ga.has(e)}at.isJSONType=Ja;function Wa(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}at.getRules=Wa;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.shouldUseRule=Ge.shouldUseGroup=Ge.schemaHasRulesForType=void 0;function xa({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Ss(e,n)}Ge.schemaHasRulesForType=xa;function Ss(e,t){return t.rules.some(r=>Ps(e,r))}Ge.shouldUseGroup=Ss;function Ps(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Ge.shouldUseRule=Ps,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=at,r=Ge,n=Ut,s=W,o=te;var a;(function(O){O[O.Correct=0]="Correct",O[O.Wrong=1]="Wrong"})(a=e.DataType||(e.DataType={}));function c(O){const j=f(O.type);if(j.includes("null")){if(O.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!j.length&&O.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');O.nullable===!0&&j.push("null")}return j}e.getSchemaTypes=c;function f(O){const j=Array.isArray(O)?O:O?[O]:[];if(j.every(t.isJSONType))return j;throw new Error("type must be JSONType or JSONType[]: "+j.join(","))}e.getJSONTypes=f;function i(O,j){const{gen:k,data:S,opts:C}=O,M=l(j,C.coerceTypes),F=j.length>0&&!(M.length===0&&j.length===1&&(0,r.schemaHasRulesForType)(O,j[0]));if(F){const L=y(j,S,C.strictNumbers,a.Wrong);k.if(L,()=>{M.length?w(O,j,M):m(O)})}return F}e.coerceAndCheckDataType=i;const u=new Set(["string","number","integer","boolean","null"]);function l(O,j){return j?O.filter(k=>u.has(k)||j==="array"&&k==="array"):[]}function w(O,j,k){const{gen:S,data:C,opts:M}=O,F=S.let("dataType",(0,s._)`typeof ${C}`),L=S.let("coerced",(0,s._)`undefined`);M.coerceTypes==="array"&&S.if((0,s._)`${F} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>S.assign(C,(0,s._)`${C}[0]`).assign(F,(0,s._)`typeof ${C}`).if(y(j,C,M.strictNumbers),()=>S.assign(L,C))),S.if((0,s._)`${L} !== undefined`);for(const B of k)(u.has(B)||B==="array"&&M.coerceTypes==="array")&&x(B);S.else(),m(O),S.endIf(),S.if((0,s._)`${L} !== undefined`,()=>{S.assign(C,L),b(O,L)});function x(B){switch(B){case"string":S.elseIf((0,s._)`${F} == "number" || ${F} == "boolean"`).assign(L,(0,s._)`"" + ${C}`).elseIf((0,s._)`${C} === null`).assign(L,(0,s._)`""`);return;case"number":S.elseIf((0,s._)`${F} == "boolean" || ${C} === null
              || (${F} == "string" && ${C} && ${C} == +${C})`).assign(L,(0,s._)`+${C}`);return;case"integer":S.elseIf((0,s._)`${F} === "boolean" || ${C} === null
              || (${F} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(L,(0,s._)`+${C}`);return;case"boolean":S.elseIf((0,s._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(L,!1).elseIf((0,s._)`${C} === "true" || ${C} === 1`).assign(L,!0);return;case"null":S.elseIf((0,s._)`${C} === "" || ${C} === 0 || ${C} === false`),S.assign(L,null);return;case"array":S.elseIf((0,s._)`${F} === "string" || ${F} === "number"
              || ${F} === "boolean" || ${C} === null`).assign(L,(0,s._)`[${C}]`)}}}function b({gen:O,parentData:j,parentDataProperty:k},S){O.if((0,s._)`${j} !== undefined`,()=>O.assign((0,s._)`${j}[${k}]`,S))}function h(O,j,k,S=a.Correct){const C=S===a.Correct?s.operators.EQ:s.operators.NEQ;let M;switch(O){case"null":return(0,s._)`${j} ${C} null`;case"array":M=(0,s._)`Array.isArray(${j})`;break;case"object":M=(0,s._)`${j} && typeof ${j} == "object" && !Array.isArray(${j})`;break;case"integer":M=F((0,s._)`!(${j} % 1) && !isNaN(${j})`);break;case"number":M=F();break;default:return(0,s._)`typeof ${j} ${C} ${O}`}return S===a.Correct?M:(0,s.not)(M);function F(L=s.nil){return(0,s.and)((0,s._)`typeof ${j} == "number"`,L,k?(0,s._)`isFinite(${j})`:s.nil)}}e.checkDataType=h;function y(O,j,k,S){if(O.length===1)return h(O[0],j,k,S);let C;const M=(0,o.toHash)(O);if(M.array&&M.object){const F=(0,s._)`typeof ${j} != "object"`;C=M.null?F:(0,s._)`!${j} || ${F}`,delete M.null,delete M.array,delete M.object}else C=s.nil;M.number&&delete M.integer;for(const F in M)C=(0,s.and)(C,h(F,j,k,S));return C}e.checkDataTypes=y;const _={message:({schema:O})=>`must be ${O}`,params:({schema:O,schemaValue:j})=>typeof O=="string"?(0,s._)`{type: ${O}}`:(0,s._)`{type: ${j}}`};function m(O){const j=E(O);(0,n.reportError)(j,_)}e.reportTypeError=m;function E(O){const{gen:j,data:k,schema:S}=O,C=(0,o.schemaRefOrVal)(O,S,"type");return{gen:j,keyword:"type",data:k,schema:S.type,schemaCode:C,schemaValue:C,parentSchema:S,params:{},it:O}}}(Vt);var mr={};Object.defineProperty(mr,"__esModule",{value:!0}),mr.assignDefaults=void 0;const vt=W,Xa=te;function Ya(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)Os(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,o)=>Os(e,o,s.default))}mr.assignDefaults=Ya;function Os(e,t,r){const{gen:n,compositeRule:s,data:o,opts:a}=e;if(r===void 0)return;const c=(0,vt._)`${o}${(0,vt.getProperty)(t)}`;if(s){(0,Xa.checkStrictMode)(e,`default is ignored for: ${c}`);return}let f=(0,vt._)`${c} === undefined`;a.useDefaults==="empty"&&(f=(0,vt._)`${f} || ${c} === null || ${c} === ""`),n.if(f,(0,vt._)`${c} = ${(0,vt.stringify)(r)}`)}var ke={},X={};Object.defineProperty(X,"__esModule",{value:!0}),X.validateUnion=X.validateArray=X.usePattern=X.callValidateCode=X.schemaProperties=X.allSchemaProperties=X.noPropertyInData=X.propertyInData=X.isOwnProperty=X.hasPropFunc=X.reportMissingProp=X.checkMissingProp=X.checkReportMissingProp=void 0;const se=W,on=te,et=De,Qa=te;function Za(e,t){const{gen:r,data:n,it:s}=e;r.if(cn(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,se._)`${t}`},!0),e.error()})}X.checkReportMissingProp=Za;function ei({gen:e,data:t,it:{opts:r}},n,s){return(0,se.or)(...n.map(o=>(0,se.and)(cn(e,t,o,r.ownProperties),(0,se._)`${s} = ${o}`)))}X.checkMissingProp=ei;function ti(e,t){e.setParams({missingProperty:t},!0),e.error()}X.reportMissingProp=ti;function Ns(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,se._)`Object.prototype.hasOwnProperty`})}X.hasPropFunc=Ns;function an(e,t,r){return(0,se._)`${Ns(e)}.call(${t}, ${r})`}X.isOwnProperty=an;function ri(e,t,r,n){const s=(0,se._)`${t}${(0,se.getProperty)(r)} !== undefined`;return n?(0,se._)`${s} && ${an(e,t,r)}`:s}X.propertyInData=ri;function cn(e,t,r,n){const s=(0,se._)`${t}${(0,se.getProperty)(r)} === undefined`;return n?(0,se.or)(s,(0,se.not)(an(e,t,r))):s}X.noPropertyInData=cn;function Ts(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}X.allSchemaProperties=Ts;function ni(e,t){return Ts(t).filter(r=>!(0,on.alwaysValidSchema)(e,t[r]))}X.schemaProperties=ni;function si({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:a},c,f,i){const u=i?(0,se._)`${e}, ${t}, ${n}${s}`:t,l=[[et.default.instancePath,(0,se.strConcat)(et.default.instancePath,o)],[et.default.parentData,a.parentData],[et.default.parentDataProperty,a.parentDataProperty],[et.default.rootData,et.default.rootData]];a.opts.dynamicRef&&l.push([et.default.dynamicAnchors,et.default.dynamicAnchors]);const w=(0,se._)`${u}, ${r.object(...l)}`;return f!==se.nil?(0,se._)`${c}.call(${f}, ${w})`:(0,se._)`${c}(${w})`}X.callValidateCode=si;const oi=(0,se._)`new RegExp`;function ai({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,se._)`${s.code==="new RegExp"?oi:(0,Qa.useFunc)(e,s)}(${r}, ${n})`})}X.usePattern=ai;function ii(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const c=t.let("valid",!0);return a(()=>t.assign(c,!1)),c}return t.var(o,!0),a(()=>t.break()),o;function a(c){const f=t.const("len",(0,se._)`${r}.length`);t.forRange("i",0,f,i=>{e.subschema({keyword:n,dataProp:i,dataPropType:on.Type.Num},o),t.if((0,se.not)(o),c)})}}X.validateArray=ii;function ci(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(f=>(0,on.alwaysValidSchema)(s,f))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),c=t.name("_valid");t.block(()=>r.forEach((f,i)=>{const u=e.subschema({keyword:n,schemaProp:i,compositeRule:!0},c);t.assign(a,(0,se._)`${a} || ${c}`),e.mergeValidEvaluated(u,c)||t.if((0,se.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}X.validateUnion=ci,Object.defineProperty(ke,"__esModule",{value:!0}),ke.validateKeywordUsage=ke.validSchemaType=ke.funcKeywordCode=ke.macroKeywordCode=void 0;const we=W,it=De,ui=X,li=Ut;function di(e,t){const{gen:r,keyword:n,schema:s,parentSchema:o,it:a}=e,c=t.macro.call(a.self,s,o,a),f=Cs(r,n,c);a.opts.validateSchema!==!1&&a.self.validateSchema(c,!0);const i=r.name("valid");e.subschema({schema:c,schemaPath:we.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:f,compositeRule:!0},i),e.pass(i,()=>e.error(!0))}ke.macroKeywordCode=di;function fi(e,t){var r;const{gen:n,keyword:s,schema:o,parentSchema:a,$data:c,it:f}=e;hi(f,t);const i=!c&&t.compile?t.compile.call(f.self,o,a,f):t.validate,u=Cs(n,s,i),l=n.let("valid");e.block$data(l,w),e.ok((r=t.valid)!==null&&r!==void 0?r:l);function w(){if(t.errors===!1)y(),t.modifying&&Rs(e),_(()=>e.error());else{const m=t.async?b():h();t.modifying&&Rs(e),_(()=>pi(e,m))}}function b(){const m=n.let("ruleErrs",null);return n.try(()=>y((0,we._)`await `),E=>n.assign(l,!1).if((0,we._)`${E} instanceof ${f.ValidationError}`,()=>n.assign(m,(0,we._)`${E}.errors`),()=>n.throw(E))),m}function h(){const m=(0,we._)`${u}.errors`;return n.assign(m,null),y(we.nil),m}function y(m=t.async?(0,we._)`await `:we.nil){const E=f.opts.passContext?it.default.this:it.default.self,O=!("compile"in t&&!c||t.schema===!1);n.assign(l,(0,we._)`${m}${(0,ui.callValidateCode)(e,u,E,O)}`,t.modifying)}function _(m){var E;n.if((0,we.not)((E=t.valid)!==null&&E!==void 0?E:l),m)}}ke.funcKeywordCode=fi;function Rs(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,we._)`${n.parentData}[${n.parentDataProperty}]`))}function pi(e,t){const{gen:r}=e;r.if((0,we._)`Array.isArray(${t})`,()=>{r.assign(it.default.vErrors,(0,we._)`${it.default.vErrors} === null ? ${t} : ${it.default.vErrors}.concat(${t})`).assign(it.default.errors,(0,we._)`${it.default.vErrors}.length`),(0,li.extendErrors)(e)},()=>e.error())}function hi({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Cs(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,we.stringify)(r)})}function mi(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}ke.validSchemaType=mi;function yi({schema:e,opts:t,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const a=s.dependencies;if(a!=null&&a.some(c=>!Object.prototype.hasOwnProperty.call(e,c)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const f=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(f);else throw new Error(f)}}ke.validateKeywordUsage=yi;var tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.extendSubschemaMode=tt.extendSubschemaData=tt.getSubschema=void 0;const Me=W,js=te;function gi(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:a}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const c=e.schema[t];return r===void 0?{schema:c,schemaPath:(0,Me._)`${e.schemaPath}${(0,Me.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:c[r],schemaPath:(0,Me._)`${e.schemaPath}${(0,Me.getProperty)(t)}${(0,Me.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,js.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}tt.getSubschema=gi;function vi(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(r!==void 0){const{errorPath:i,dataPathArr:u,opts:l}=t,w=c.let("data",(0,Me._)`${t.data}${(0,Me.getProperty)(r)}`,!0);f(w),e.errorPath=(0,Me.str)`${i}${(0,js.getErrorPath)(r,n,l.jsPropertySyntax)}`,e.parentDataProperty=(0,Me._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(s!==void 0){const i=s instanceof Me.Name?s:c.let("data",s,!0);f(i),a!==void 0&&(e.propertyName=a)}o&&(e.dataTypes=o);function f(i){e.data=i,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,i]}}tt.extendSubschemaData=vi;function $i(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}tt.extendSubschemaMode=$i;var ve={},As=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var a=o[s];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r},un={},_i={get exports(){return un},set exports(e){un=e}},rt=_i.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};yr(t,n,s,e,"",e)};rt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},rt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},rt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},rt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function yr(e,t,r,n,s,o,a,c,f,i){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,a,c,f,i);for(var u in n){var l=n[u];if(Array.isArray(l)){if(u in rt.arrayKeywords)for(var w=0;w<l.length;w++)yr(e,t,r,l[w],s+"/"+u+"/"+w,o,s,u,n,w)}else if(u in rt.propsKeywords){if(l&&typeof l=="object")for(var b in l)yr(e,t,r,l[b],s+"/"+u+"/"+wi(b),o,s,u,n,b)}else(u in rt.keywords||e.allKeys&&!(u in rt.skipKeywords))&&yr(e,t,r,l,s+"/"+u,o,s,u,n)}r(n,s,o,a,c,f,i)}}function wi(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(ve,"__esModule",{value:!0}),ve.getSchemaRefs=ve.resolveUrl=ve.normalizeId=ve._getFullPath=ve.getFullPath=ve.inlineRef=void 0;const bi=te,Ei=As,Si=un,Pi=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Oi(e,t=!0){return typeof e=="boolean"?!0:t===!0?!ln(e):t?Is(e)<=t:!1}ve.inlineRef=Oi;const Ni=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ln(e){for(const t in e){if(Ni.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(ln)||typeof r=="object"&&ln(r))return!0}return!1}function Is(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Pi.has(r)&&(typeof e[r]=="object"&&(0,bi.eachItem)(e[r],n=>t+=Is(n)),t===1/0))return 1/0}return t}function Ds(e,t="",r){r!==!1&&(t=$t(t));const n=e.parse(t);return ks(e,n)}ve.getFullPath=Ds;function ks(e,t){return e.serialize(t).split("#")[0]+"#"}ve._getFullPath=ks;const Ti=/#\/?$/;function $t(e){return e?e.replace(Ti,""):""}ve.normalizeId=$t;function Ri(e,t,r){return r=$t(r),e.resolve(t,r)}ve.resolveUrl=Ri;const Ci=/^[a-z_][-a-z0-9._]*$/i;function ji(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=$t(e[r]||t),o={"":s},a=Ds(n,s,!1),c={},f=new Set;return Si(e,{allKeys:!0},(l,w,b,h)=>{if(h===void 0)return;const y=a+w;let _=o[h];typeof l[r]=="string"&&(_=m.call(this,l[r])),E.call(this,l.$anchor),E.call(this,l.$dynamicAnchor),o[w]=_;function m(O){const j=this.opts.uriResolver.resolve;if(O=$t(_?j(_,O):O),f.has(O))throw u(O);f.add(O);let k=this.refs[O];return typeof k=="string"&&(k=this.refs[k]),typeof k=="object"?i(l,k.schema,O):O!==$t(y)&&(O[0]==="#"?(i(l,c[O],O),c[O]=l):this.refs[O]=y),O}function E(O){if(typeof O=="string"){if(!Ci.test(O))throw new Error(`invalid anchor "${O}"`);m.call(this,`#${O}`)}}}),c;function i(l,w,b){if(w!==void 0&&!Ei(l,w))throw u(b)}function u(l){return new Error(`reference "${l}" resolves to more than one schema`)}}ve.getSchemaRefs=ji,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getData=Ce.KeywordCxt=Ce.validateFunctionCode=void 0;const Ms=gt,Fs=Vt,dn=Ge,gr=Vt,Ai=mr,Lt=ke,fn=tt,q=W,G=De,Ii=ve,Je=te,qt=Ut;function Di(e){if(Ls(e)&&(qs(e),Vs(e))){Fi(e);return}Us(e,()=>(0,Ms.topBoolOrEmptySchema)(e))}Ce.validateFunctionCode=Di;function Us({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},o){s.code.es5?e.func(t,(0,q._)`${G.default.data}, ${G.default.valCxt}`,n.$async,()=>{e.code((0,q._)`"use strict"; ${zs(r,s)}`),Mi(e,s),e.code(o)}):e.func(t,(0,q._)`${G.default.data}, ${ki(s)}`,n.$async,()=>e.code(zs(r,s)).code(o))}function ki(e){return(0,q._)`{${G.default.instancePath}="", ${G.default.parentData}, ${G.default.parentDataProperty}, ${G.default.rootData}=${G.default.data}${e.dynamicRef?(0,q._)`, ${G.default.dynamicAnchors}={}`:q.nil}}={}`}function Mi(e,t){e.if(G.default.valCxt,()=>{e.var(G.default.instancePath,(0,q._)`${G.default.valCxt}.${G.default.instancePath}`),e.var(G.default.parentData,(0,q._)`${G.default.valCxt}.${G.default.parentData}`),e.var(G.default.parentDataProperty,(0,q._)`${G.default.valCxt}.${G.default.parentDataProperty}`),e.var(G.default.rootData,(0,q._)`${G.default.valCxt}.${G.default.rootData}`),t.dynamicRef&&e.var(G.default.dynamicAnchors,(0,q._)`${G.default.valCxt}.${G.default.dynamicAnchors}`)},()=>{e.var(G.default.instancePath,(0,q._)`""`),e.var(G.default.parentData,(0,q._)`undefined`),e.var(G.default.parentDataProperty,(0,q._)`undefined`),e.var(G.default.rootData,G.default.data),t.dynamicRef&&e.var(G.default.dynamicAnchors,(0,q._)`{}`)})}function Fi(e){const{schema:t,opts:r,gen:n}=e;Us(e,()=>{r.$comment&&t.$comment&&Ks(e),qi(e),n.let(G.default.vErrors,null),n.let(G.default.errors,0),r.unevaluated&&Ui(e),Hs(e),Bi(e)})}function Ui(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,q._)`${r}.evaluated`),t.if((0,q._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,q._)`${e.evaluated}.props`,(0,q._)`undefined`)),t.if((0,q._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,q._)`${e.evaluated}.items`,(0,q._)`undefined`))}function zs(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,q._)`/*# sourceURL=${r} */`:q.nil}function zi(e,t){if(Ls(e)&&(qs(e),Vs(e))){Vi(e,t);return}(0,Ms.boolOrEmptySchema)(e,t)}function Vs({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function Ls(e){return typeof e.schema!="boolean"}function Vi(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&Ks(e),Hi(e),Ki(e);const o=n.const("_errs",G.default.errors);Hs(e,o),n.var(t,(0,q._)`${o} === ${G.default.errors}`)}function qs(e){(0,Je.checkUnknownRules)(e),Li(e)}function Hs(e,t){if(e.opts.jtd)return Bs(e,[],!1,t);const r=(0,Fs.getSchemaTypes)(e.schema),n=(0,Fs.coerceAndCheckDataType)(e,r);Bs(e,r,!n,t)}function Li(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Je.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function qi(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Je.checkStrictMode)(e,"default is ignored in the schema root")}function Hi(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Ii.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Ki(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ks({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)e.code((0,q._)`${G.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const a=(0,q.str)`${n}/$comment`,c=e.scopeValue("root",{ref:t.root});e.code((0,q._)`${G.default.self}.opts.$comment(${o}, ${a}, ${c}.schema)`)}}function Bi(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=e;r.$async?t.if((0,q._)`${G.default.errors} === 0`,()=>t.return(G.default.data),()=>t.throw((0,q._)`new ${s}(${G.default.vErrors})`)):(t.assign((0,q._)`${n}.errors`,G.default.vErrors),o.unevaluated&&Gi(e),t.return((0,q._)`${G.default.errors} === 0`))}function Gi({gen:e,evaluated:t,props:r,items:n}){r instanceof q.Name&&e.assign((0,q._)`${t}.props`,r),n instanceof q.Name&&e.assign((0,q._)`${t}.items`,n)}function Bs(e,t,r,n){const{gen:s,schema:o,data:a,allErrors:c,opts:f,self:i}=e,{RULES:u}=i;if(o.$ref&&(f.ignoreKeywordsWithRef||!(0,Je.schemaHasRulesButRef)(o,u))){s.block(()=>xs(e,"$ref",u.all.$ref.definition));return}f.jtd||Ji(e,t),s.block(()=>{for(const w of u.rules)l(w);l(u.post)});function l(w){(0,dn.shouldUseGroup)(o,w)&&(w.type?(s.if((0,gr.checkDataType)(w.type,a,f.strictNumbers)),Gs(e,w),t.length===1&&t[0]===w.type&&r&&(s.else(),(0,gr.reportTypeError)(e)),s.endIf()):Gs(e,w),c||s.if((0,q._)`${G.default.errors} === ${n||0}`))}}function Gs(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,Ai.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,dn.shouldUseRule)(n,o)&&xs(e,o.keyword,o.definition,t.type)})}function Ji(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Wi(e,t),e.opts.allowUnionTypes||xi(e,t),Xi(e,e.dataTypes))}function Wi(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Js(e.dataTypes,r)||pn(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Qi(e,t)}}function xi(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&pn(e,"use allowUnionTypes to allow union type keyword")}function Xi(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,dn.shouldUseRule)(e.schema,s)){const{type:o}=s.definition;o.length&&!o.some(a=>Yi(t,a))&&pn(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function Yi(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Js(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Qi(e,t){const r=[];for(const n of e.dataTypes)Js(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function pn(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Je.checkStrictMode)(e,t,e.opts.strictTypes)}class Ws{constructor(t,r,n){if((0,Lt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Je.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Xs(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Lt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",G.default.errors))}result(t,r,n){this.failResult((0,q.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,q.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,q._)`${r} !== undefined && (${(0,q.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?qt.reportExtraError:qt.reportError)(this,this.def.error,r)}$dataError(){(0,qt.reportError)(this,this.def.$dataError||qt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,qt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=q.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=q.nil,r=q.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:a}=this;n.if((0,q.or)((0,q._)`${s} === undefined`,r)),t!==q.nil&&n.assign(t,!0),(o.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==q.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,q.or)(a(),c());function a(){if(n.length){if(!(r instanceof q.Name))throw new Error("ajv implementation error");const f=Array.isArray(n)?n:[n];return(0,q._)`${(0,gr.checkDataTypes)(f,r,o.opts.strictNumbers,gr.DataType.Wrong)}`}return q.nil}function c(){if(s.validateSchema){const f=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,q._)`!${f}(${r})`}return q.nil}}subschema(t,r){const n=(0,fn.getSubschema)(this.it,t);(0,fn.extendSubschemaData)(n,this.it,t),(0,fn.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return zi(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Je.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Je.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,q.Name)),!0}}Ce.KeywordCxt=Ws;function xs(e,t,r,n){const s=new Ws(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Lt.funcKeywordCode)(s,r):"macro"in r?(0,Lt.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Lt.funcKeywordCode)(s,r)}const Zi=/^\/(?:[^~]|~0|~1)*$/,ec=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Xs(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,o;if(e==="")return G.default.rootData;if(e[0]==="/"){if(!Zi.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=G.default.rootData}else{const i=ec.exec(e);if(!i)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+i[1];if(s=i[2],s==="#"){if(u>=t)throw new Error(f("property/index",u));return n[t-u]}if(u>t)throw new Error(f("data",u));if(o=r[t-u],!s)return o}let a=o;const c=s.split("/");for(const i of c)i&&(o=(0,q._)`${o}${(0,q.getProperty)((0,Je.unescapeJsonPointer)(i))}`,a=(0,q._)`${a} && ${o}`);return a;function f(i,u){return`Cannot access ${i} ${u} levels up, current level is ${t}`}}Ce.getData=Xs;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});class tc extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Ht.default=tc;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});const hn=ve;class rc extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,hn.resolveUrl)(t,r,n),this.missingSchema=(0,hn.normalizeId)((0,hn.getFullPath)(t,this.missingRef))}}Kt.default=rc;var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.resolveSchema=be.getCompilingSchema=be.resolveRef=be.compileSchema=be.SchemaEnv=void 0;const je=W,nc=Ht,ct=De,Ae=ve,Ys=te,sc=Ce;class vr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ae.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}be.SchemaEnv=vr;function mn(e){const t=Qs.call(this,e);if(t)return t;const r=(0,Ae.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,a=new je.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let c;e.$async&&(c=a.scopeValue("Error",{ref:nc.default,code:(0,je._)`require("ajv/dist/runtime/validation_error").default`}));const f=a.scopeName("validate");e.validateName=f;const i={gen:a,allErrors:this.opts.allErrors,data:ct.default.data,parentData:ct.default.parentData,parentDataProperty:ct.default.parentDataProperty,dataNames:[ct.default.data],dataPathArr:[je.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,je.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:c,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:je.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,je._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,sc.validateFunctionCode)(i),a.optimize(this.opts.code.optimize);const l=a.toString();u=`${a.scopeRefs(ct.default.scope)}return ${l}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const b=new Function(`${ct.default.self}`,`${ct.default.scope}`,u)(this,this.scope.get());if(this.scope.value(f,{ref:b}),b.errors=null,b.schema=e.schema,b.schemaEnv=e,e.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:f,validateCode:l,scopeValues:a._values}),this.opts.unevaluated){const{props:h,items:y}=i;b.evaluated={props:h instanceof je.Name?void 0:h,items:y instanceof je.Name?void 0:y,dynamicProps:h instanceof je.Name,dynamicItems:y instanceof je.Name},b.source&&(b.source.evaluated=(0,je.stringify)(b.evaluated))}return e.validate=b,e}catch(l){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),l}finally{this._compilations.delete(e)}}be.compileSchema=mn;function oc(e,t,r){var n;r=(0,Ae.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=cc.call(this,e,r);if(o===void 0){const a=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:c}=this.opts;a&&(o=new vr({schema:a,schemaId:c,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=ac.call(this,o)}be.resolveRef=oc;function ac(e){return(0,Ae.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:mn.call(this,e)}function Qs(e){for(const t of this._compilations)if(ic(t,e))return t}be.getCompilingSchema=Qs;function ic(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function cc(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||$r.call(this,e,t)}function $r(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Ae._getFullPath)(this.opts.uriResolver,r);let s=(0,Ae.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return yn.call(this,r,e);const o=(0,Ae.normalizeId)(n),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){const c=$r.call(this,e,a);return typeof(c==null?void 0:c.schema)!="object"?void 0:yn.call(this,r,c)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||mn.call(this,a),o===(0,Ae.normalizeId)(t)){const{schema:c}=a,{schemaId:f}=this.opts,i=c[f];return i&&(s=(0,Ae.resolveUrl)(this.opts.uriResolver,s,i)),new vr({schema:c,schemaId:f,root:e,baseId:s})}return yn.call(this,r,a)}}be.resolveSchema=$r;const uc=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function yn(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const c of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const f=r[(0,Ys.unescapeFragment)(c)];if(f===void 0)return;r=f;const i=typeof r=="object"&&r[this.opts.schemaId];!uc.has(c)&&i&&(t=(0,Ae.resolveUrl)(this.opts.uriResolver,t,i))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Ys.schemaHasRulesButRef)(r,this.RULES)){const c=(0,Ae.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=$r.call(this,n,c)}const{schemaId:a}=this.opts;if(o=o||new vr({schema:r,schemaId:a,root:n,baseId:t}),o.schema!==o.root.schema)return o}const lc={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var gn={},_r={},dc={get exports(){return _r},set exports(e){_r=e}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(Ma,function(r){function n(){for(var g=arguments.length,p=Array(g),$=0;$<g;$++)p[$]=arguments[$];if(p.length>1){p[0]=p[0].slice(0,-1);for(var R=p.length-1,T=1;T<R;++T)p[T]=p[T].slice(1,-1);return p[R]=p[R].slice(1),p.join("")}else return p[0]}function s(g){return"(?:"+g+")"}function o(g){return g===void 0?"undefined":g===null?"null":Object.prototype.toString.call(g).split(" ").pop().split("]").shift().toLowerCase()}function a(g){return g.toUpperCase()}function c(g){return g!=null?g instanceof Array?g:typeof g.length!="number"||g.split||g.setInterval||g.call?[g]:Array.prototype.slice.call(g):[]}function f(g,p){var $=g;if(p)for(var R in p)$[R]=p[R];return $}function i(g){var p="[A-Za-z]",$="[0-9]",R=n($,"[A-Fa-f]"),T=s(s("%[EFef]"+R+"%"+R+R+"%"+R+R)+"|"+s("%[89A-Fa-f]"+R+"%"+R+R)+"|"+s("%"+R+R)),H="[\\:\\/\\?\\#\\[\\]\\@]",K="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ee=n(H,K),ae=g?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",de=g?"[\\uE000-\\uF8FF]":"[]",Q=n(p,$,"[\\-\\.\\_\\~]",ae);s(p+n(p,$,"[\\+\\-\\.]")+"*"),s(s(T+"|"+n(Q,K,"[\\:]"))+"*");var ne=s(s("25[0-5]")+"|"+s("2[0-4]"+$)+"|"+s("1"+$+$)+"|"+s("0?[1-9]"+$)+"|0?0?"+$),fe=s(ne+"\\."+ne+"\\."+ne+"\\."+ne),J=s(R+"{1,4}"),ie=s(s(J+"\\:"+J)+"|"+fe),me=s(s(J+"\\:")+"{6}"+ie),ce=s("\\:\\:"+s(J+"\\:")+"{5}"+ie),ot=s(s(J)+"?\\:\\:"+s(J+"\\:")+"{4}"+ie),He=s(s(s(J+"\\:")+"{0,1}"+J)+"?\\:\\:"+s(J+"\\:")+"{3}"+ie),Ke=s(s(s(J+"\\:")+"{0,2}"+J)+"?\\:\\:"+s(J+"\\:")+"{2}"+ie),Mt=s(s(s(J+"\\:")+"{0,3}"+J)+"?\\:\\:"+J+"\\:"+ie),mt=s(s(s(J+"\\:")+"{0,4}"+J)+"?\\:\\:"+ie),Re=s(s(s(J+"\\:")+"{0,5}"+J)+"?\\:\\:"+J),Be=s(s(s(J+"\\:")+"{0,6}"+J)+"?\\:\\:"),yt=s([me,ce,ot,He,Ke,Mt,mt,Re,Be].join("|")),Qe=s(s(Q+"|"+T)+"+");s("[vV]"+R+"+\\."+n(Q,K,"[\\:]")+"+"),s(s(T+"|"+n(Q,K))+"*");var pr=s(T+"|"+n(Q,K,"[\\:\\@]"));return s(s(T+"|"+n(Q,K,"[\\@]"))+"+"),s(s(pr+"|"+n("[\\/\\?]",de))+"*"),{NOT_SCHEME:new RegExp(n("[^]",p,$,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Q,K),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Q,K),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Q,K),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Q,K),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Q,K,"[\\:\\@\\/\\?]",de),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Q,K,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Q,K),"g"),UNRESERVED:new RegExp(Q,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Q,ee),"g"),PCT_ENCODED:new RegExp(T,"g"),IPV4ADDRESS:new RegExp("^("+fe+")$"),IPV6ADDRESS:new RegExp("^\\[?("+yt+")"+s(s("\\%25|\\%(?!"+R+"{2})")+"("+Qe+")")+"?\\]?$")}}var u=i(!1),l=i(!0),w=function(){function g(p,$){var R=[],T=!0,H=!1,K=void 0;try{for(var ee=p[Symbol.iterator](),ae;!(T=(ae=ee.next()).done)&&(R.push(ae.value),!($&&R.length===$));T=!0);}catch(de){H=!0,K=de}finally{try{!T&&ee.return&&ee.return()}finally{if(H)throw K}}return R}return function(p,$){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return g(p,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(g){if(Array.isArray(g)){for(var p=0,$=Array(g.length);p<g.length;p++)$[p]=g[p];return $}else return Array.from(g)},h=2147483647,y=36,_=1,m=26,E=38,O=700,j=72,k=128,S="-",C=/^xn--/,M=/[^\0-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=y-_,B=Math.floor,he=String.fromCharCode;function oe(g){throw new RangeError(L[g])}function Ne(g,p){for(var $=[],R=g.length;R--;)$[R]=p(g[R]);return $}function ft(g,p){var $=g.split("@"),R="";$.length>1&&(R=$[0]+"@",g=$[1]),g=g.replace(F,".");var T=g.split("."),H=Ne(T,p).join(".");return R+H}function Tt(g){for(var p=[],$=0,R=g.length;$<R;){var T=g.charCodeAt($++);if(T>=55296&&T<=56319&&$<R){var H=g.charCodeAt($++);(H&64512)==56320?p.push(((T&1023)<<10)+(H&1023)+65536):(p.push(T),$--)}else p.push(T)}return p}var or=function(p){return String.fromCodePoint.apply(String,b(p))},Rt=function(p){return p-48<10?p-22:p-65<26?p-65:p-97<26?p-97:y},U=function(p,$){return p+22+75*(p<26)-(($!=0)<<5)},P=function(p,$,R){var T=0;for(p=R?B(p/O):p>>1,p+=B(p/$);p>x*m>>1;T+=y)p=B(p/x);return B(T+(x+1)*p/(p+E))},D=function(p){var $=[],R=p.length,T=0,H=k,K=j,ee=p.lastIndexOf(S);ee<0&&(ee=0);for(var ae=0;ae<ee;++ae)p.charCodeAt(ae)>=128&&oe("not-basic"),$.push(p.charCodeAt(ae));for(var de=ee>0?ee+1:0;de<R;){for(var Q=T,ne=1,fe=y;;fe+=y){de>=R&&oe("invalid-input");var J=Rt(p.charCodeAt(de++));(J>=y||J>B((h-T)/ne))&&oe("overflow"),T+=J*ne;var ie=fe<=K?_:fe>=K+m?m:fe-K;if(J<ie)break;var me=y-ie;ne>B(h/me)&&oe("overflow"),ne*=me}var ce=$.length+1;K=P(T-Q,ce,Q==0),B(T/ce)>h-H&&oe("overflow"),H+=B(T/ce),T%=ce,$.splice(T++,0,H)}return String.fromCodePoint.apply(String,$)},N=function(p){var $=[];p=Tt(p);var R=p.length,T=k,H=0,K=j,ee=!0,ae=!1,de=void 0;try{for(var Q=p[Symbol.iterator](),ne;!(ee=(ne=Q.next()).done);ee=!0){var fe=ne.value;fe<128&&$.push(he(fe))}}catch(hr){ae=!0,de=hr}finally{try{!ee&&Q.return&&Q.return()}finally{if(ae)throw de}}var J=$.length,ie=J;for(J&&$.push(S);ie<R;){var me=h,ce=!0,ot=!1,He=void 0;try{for(var Ke=p[Symbol.iterator](),Mt;!(ce=(Mt=Ke.next()).done);ce=!0){var mt=Mt.value;mt>=T&&mt<me&&(me=mt)}}catch(hr){ot=!0,He=hr}finally{try{!ce&&Ke.return&&Ke.return()}finally{if(ot)throw He}}var Re=ie+1;me-T>B((h-H)/Re)&&oe("overflow"),H+=(me-T)*Re,T=me;var Be=!0,yt=!1,Qe=void 0;try{for(var pr=p[Symbol.iterator](),ba;!(Be=(ba=pr.next()).done);Be=!0){var Ea=ba.value;if(Ea<T&&++H>h&&oe("overflow"),Ea==T){for(var Qr=H,Zr=y;;Zr+=y){var en=Zr<=K?_:Zr>=K+m?m:Zr-K;if(Qr<en)break;var Sa=Qr-en,Pa=y-en;$.push(he(U(en+Sa%Pa,0))),Qr=B(Sa/Pa)}$.push(he(U(Qr,0))),K=P(H,Re,ie==J),H=0,++ie}}}catch(hr){yt=!0,Qe=hr}finally{try{!Be&&pr.return&&pr.return()}finally{if(yt)throw Qe}}++H,++T}return $.join("")},d=function(p){return ft(p,function($){return C.test($)?D($.slice(4).toLowerCase()):$})},v=function(p){return ft(p,function($){return M.test($)?"xn--"+N($):$})},A={version:"2.1.0",ucs2:{decode:Tt,encode:or},decode:D,encode:N,toASCII:v,toUnicode:d},z={};function V(g){var p=g.charCodeAt(0),$=void 0;return p<16?$="%0"+p.toString(16).toUpperCase():p<128?$="%"+p.toString(16).toUpperCase():p<2048?$="%"+(p>>6|192).toString(16).toUpperCase()+"%"+(p&63|128).toString(16).toUpperCase():$="%"+(p>>12|224).toString(16).toUpperCase()+"%"+(p>>6&63|128).toString(16).toUpperCase()+"%"+(p&63|128).toString(16).toUpperCase(),$}function Y(g){for(var p="",$=0,R=g.length;$<R;){var T=parseInt(g.substr($+1,2),16);if(T<128)p+=String.fromCharCode(T),$+=3;else if(T>=194&&T<224){if(R-$>=6){var H=parseInt(g.substr($+4,2),16);p+=String.fromCharCode((T&31)<<6|H&63)}else p+=g.substr($,6);$+=6}else if(T>=224){if(R-$>=9){var K=parseInt(g.substr($+4,2),16),ee=parseInt(g.substr($+7,2),16);p+=String.fromCharCode((T&15)<<12|(K&63)<<6|ee&63)}else p+=g.substr($,9);$+=9}else p+=g.substr($,3),$+=3}return p}function Z(g,p){function $(R){var T=Y(R);return T.match(p.UNRESERVED)?T:R}return g.scheme&&(g.scheme=String(g.scheme).replace(p.PCT_ENCODED,$).toLowerCase().replace(p.NOT_SCHEME,"")),g.userinfo!==void 0&&(g.userinfo=String(g.userinfo).replace(p.PCT_ENCODED,$).replace(p.NOT_USERINFO,V).replace(p.PCT_ENCODED,a)),g.host!==void 0&&(g.host=String(g.host).replace(p.PCT_ENCODED,$).toLowerCase().replace(p.NOT_HOST,V).replace(p.PCT_ENCODED,a)),g.path!==void 0&&(g.path=String(g.path).replace(p.PCT_ENCODED,$).replace(g.scheme?p.NOT_PATH:p.NOT_PATH_NOSCHEME,V).replace(p.PCT_ENCODED,a)),g.query!==void 0&&(g.query=String(g.query).replace(p.PCT_ENCODED,$).replace(p.NOT_QUERY,V).replace(p.PCT_ENCODED,a)),g.fragment!==void 0&&(g.fragment=String(g.fragment).replace(p.PCT_ENCODED,$).replace(p.NOT_FRAGMENT,V).replace(p.PCT_ENCODED,a)),g}function ue(g){return g.replace(/^0*(.*)/,"$1")||"0"}function Ve(g,p){var $=g.match(p.IPV4ADDRESS)||[],R=w($,2),T=R[1];return T?T.split(".").map(ue).join("."):g}function Ct(g,p){var $=g.match(p.IPV6ADDRESS)||[],R=w($,3),T=R[1],H=R[2];if(T){for(var K=T.toLowerCase().split("::").reverse(),ee=w(K,2),ae=ee[0],de=ee[1],Q=de?de.split(":").map(ue):[],ne=ae.split(":").map(ue),fe=p.IPV4ADDRESS.test(ne[ne.length-1]),J=fe?7:8,ie=ne.length-J,me=Array(J),ce=0;ce<J;++ce)me[ce]=Q[ce]||ne[ie+ce]||"";fe&&(me[J-1]=Ve(me[J-1],p));var ot=me.reduce(function(Re,Be,yt){if(!Be||Be==="0"){var Qe=Re[Re.length-1];Qe&&Qe.index+Qe.length===yt?Qe.length++:Re.push({index:yt,length:1})}return Re},[]),He=ot.sort(function(Re,Be){return Be.length-Re.length})[0],Ke=void 0;if(He&&He.length>1){var Mt=me.slice(0,He.index),mt=me.slice(He.index+He.length);Ke=Mt.join(":")+"::"+mt.join(":")}else Ke=me.join(":");return H&&(Ke+="%"+H),Ke}else return g}var ar=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ir="".match(/(){0}/)[1]===void 0;function Pe(g){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$={},R=p.iri!==!1?l:u;p.reference==="suffix"&&(g=(p.scheme?p.scheme+":":"")+"//"+g);var T=g.match(ar);if(T){ir?($.scheme=T[1],$.userinfo=T[3],$.host=T[4],$.port=parseInt(T[5],10),$.path=T[6]||"",$.query=T[7],$.fragment=T[8],isNaN($.port)&&($.port=T[5])):($.scheme=T[1]||void 0,$.userinfo=g.indexOf("@")!==-1?T[3]:void 0,$.host=g.indexOf("//")!==-1?T[4]:void 0,$.port=parseInt(T[5],10),$.path=T[6]||"",$.query=g.indexOf("?")!==-1?T[7]:void 0,$.fragment=g.indexOf("#")!==-1?T[8]:void 0,isNaN($.port)&&($.port=g.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?T[4]:void 0)),$.host&&($.host=Ct(Ve($.host,R),R)),$.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&!$.path&&$.query===void 0?$.reference="same-document":$.scheme===void 0?$.reference="relative":$.fragment===void 0?$.reference="absolute":$.reference="uri",p.reference&&p.reference!=="suffix"&&p.reference!==$.reference&&($.error=$.error||"URI is not a "+p.reference+" reference.");var H=z[(p.scheme||$.scheme||"").toLowerCase()];if(!p.unicodeSupport&&(!H||!H.unicodeSupport)){if($.host&&(p.domainHost||H&&H.domainHost))try{$.host=A.toASCII($.host.replace(R.PCT_ENCODED,Y).toLowerCase())}catch(K){$.error=$.error||"Host's domain name can not be converted to ASCII via punycode: "+K}Z($,u)}else Z($,R);H&&H.parse&&H.parse($,p)}else $.error=$.error||"URI can not be parsed.";return $}function cr(g,p){var $=p.iri!==!1?l:u,R=[];return g.userinfo!==void 0&&(R.push(g.userinfo),R.push("@")),g.host!==void 0&&R.push(Ct(Ve(String(g.host),$),$).replace($.IPV6ADDRESS,function(T,H,K){return"["+H+(K?"%25"+K:"")+"]"})),(typeof g.port=="number"||typeof g.port=="string")&&(R.push(":"),R.push(String(g.port))),R.length?R.join(""):void 0}var jt=/^\.\.?\//,At=/^\/\.(\/|$)/,It=/^\/\.\.(\/|$)/,ur=/^\/?(?:.|\n)*?(?=\/|$)/;function Le(g){for(var p=[];g.length;)if(g.match(jt))g=g.replace(jt,"");else if(g.match(At))g=g.replace(At,"/");else if(g.match(It))g=g.replace(It,"/"),p.pop();else if(g==="."||g==="..")g="";else{var $=g.match(ur);if($){var R=$[0];g=g.slice(R.length),p.push(R)}else throw new Error("Unexpected dot segment condition")}return p.join("")}function Se(g){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=p.iri?l:u,R=[],T=z[(p.scheme||g.scheme||"").toLowerCase()];if(T&&T.serialize&&T.serialize(g,p),g.host&&!$.IPV6ADDRESS.test(g.host)){if(p.domainHost||T&&T.domainHost)try{g.host=p.iri?A.toUnicode(g.host):A.toASCII(g.host.replace($.PCT_ENCODED,Y).toLowerCase())}catch(ee){g.error=g.error||"Host's domain name can not be converted to "+(p.iri?"Unicode":"ASCII")+" via punycode: "+ee}}Z(g,$),p.reference!=="suffix"&&g.scheme&&(R.push(g.scheme),R.push(":"));var H=cr(g,p);if(H!==void 0&&(p.reference!=="suffix"&&R.push("//"),R.push(H),g.path&&g.path.charAt(0)!=="/"&&R.push("/")),g.path!==void 0){var K=g.path;!p.absolutePath&&(!T||!T.absolutePath)&&(K=Le(K)),H===void 0&&(K=K.replace(/^\/\//,"/%2F")),R.push(K)}return g.query!==void 0&&(R.push("?"),R.push(g.query)),g.fragment!==void 0&&(R.push("#"),R.push(g.fragment)),R.join("")}function Dt(g,p){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=arguments[3],T={};return R||(g=Pe(Se(g,$),$),p=Pe(Se(p,$),$)),$=$||{},!$.tolerant&&p.scheme?(T.scheme=p.scheme,T.userinfo=p.userinfo,T.host=p.host,T.port=p.port,T.path=Le(p.path||""),T.query=p.query):(p.userinfo!==void 0||p.host!==void 0||p.port!==void 0?(T.userinfo=p.userinfo,T.host=p.host,T.port=p.port,T.path=Le(p.path||""),T.query=p.query):(p.path?(p.path.charAt(0)==="/"?T.path=Le(p.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?T.path="/"+p.path:g.path?T.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+p.path:T.path=p.path,T.path=Le(T.path)),T.query=p.query):(T.path=g.path,p.query!==void 0?T.query=p.query:T.query=g.query),T.userinfo=g.userinfo,T.host=g.host,T.port=g.port),T.scheme=g.scheme),T.fragment=p.fragment,T}function lr(g,p,$){var R=f({scheme:"null"},$);return Se(Dt(Pe(g,R),Pe(p,R),R,!0),R)}function pt(g,p){return typeof g=="string"?g=Se(Pe(g,p),p):o(g)==="object"&&(g=Pe(Se(g,p),p)),g}function dr(g,p,$){return typeof g=="string"?g=Se(Pe(g,$),$):o(g)==="object"&&(g=Se(g,$)),typeof p=="string"?p=Se(Pe(p,$),$):o(p)==="object"&&(p=Se(p,$)),g===p}function Yr(g,p){return g&&g.toString().replace(!p||!p.iri?u.ESCAPE:l.ESCAPE,V)}function Te(g,p){return g&&g.toString().replace(!p||!p.iri?u.PCT_ENCODED:l.PCT_ENCODED,Y)}var ht={scheme:"http",domainHost:!0,parse:function(p,$){return p.host||(p.error=p.error||"HTTP URIs must have a host."),p},serialize:function(p,$){var R=String(p.scheme).toLowerCase()==="https";return(p.port===(R?443:80)||p.port==="")&&(p.port=void 0),p.path||(p.path="/"),p}},ha={scheme:"https",domainHost:ht.domainHost,parse:ht.parse,serialize:ht.serialize};function ma(g){return typeof g.secure=="boolean"?g.secure:String(g.scheme).toLowerCase()==="wss"}var fr={scheme:"ws",domainHost:!0,parse:function(p,$){var R=p;return R.secure=ma(R),R.resourceName=(R.path||"/")+(R.query?"?"+R.query:""),R.path=void 0,R.query=void 0,R},serialize:function(p,$){if((p.port===(ma(p)?443:80)||p.port==="")&&(p.port=void 0),typeof p.secure=="boolean"&&(p.scheme=p.secure?"wss":"ws",p.secure=void 0),p.resourceName){var R=p.resourceName.split("?"),T=w(R,2),H=T[0],K=T[1];p.path=H&&H!=="/"?H:void 0,p.query=K,p.resourceName=void 0}return p.fragment=void 0,p}},ya={scheme:"wss",domainHost:fr.domainHost,parse:fr.parse,serialize:fr.serialize},Td={},ga="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",qe="[0-9A-Fa-f]",Rd=s(s("%[EFef]"+qe+"%"+qe+qe+"%"+qe+qe)+"|"+s("%[89A-Fa-f]"+qe+"%"+qe+qe)+"|"+s("%"+qe+qe)),Cd="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",jd="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ad=n(jd,'[\\"\\\\]'),Id="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Dd=new RegExp(ga,"g"),kt=new RegExp(Rd,"g"),kd=new RegExp(n("[^]",Cd,"[\\.]",'[\\"]',Ad),"g"),va=new RegExp(n("[^]",ga,Id),"g"),Md=va;function gs(g){var p=Y(g);return p.match(Dd)?p:g}var $a={scheme:"mailto",parse:function(p,$){var R=p,T=R.to=R.path?R.path.split(","):[];if(R.path=void 0,R.query){for(var H=!1,K={},ee=R.query.split("&"),ae=0,de=ee.length;ae<de;++ae){var Q=ee[ae].split("=");switch(Q[0]){case"to":for(var ne=Q[1].split(","),fe=0,J=ne.length;fe<J;++fe)T.push(ne[fe]);break;case"subject":R.subject=Te(Q[1],$);break;case"body":R.body=Te(Q[1],$);break;default:H=!0,K[Te(Q[0],$)]=Te(Q[1],$);break}}H&&(R.headers=K)}R.query=void 0;for(var ie=0,me=T.length;ie<me;++ie){var ce=T[ie].split("@");if(ce[0]=Te(ce[0]),$.unicodeSupport)ce[1]=Te(ce[1],$).toLowerCase();else try{ce[1]=A.toASCII(Te(ce[1],$).toLowerCase())}catch(ot){R.error=R.error||"Email address's domain name can not be converted to ASCII via punycode: "+ot}T[ie]=ce.join("@")}return R},serialize:function(p,$){var R=p,T=c(p.to);if(T){for(var H=0,K=T.length;H<K;++H){var ee=String(T[H]),ae=ee.lastIndexOf("@"),de=ee.slice(0,ae).replace(kt,gs).replace(kt,a).replace(kd,V),Q=ee.slice(ae+1);try{Q=$.iri?A.toUnicode(Q):A.toASCII(Te(Q,$).toLowerCase())}catch(ie){R.error=R.error||"Email address's domain name can not be converted to "+($.iri?"Unicode":"ASCII")+" via punycode: "+ie}T[H]=de+"@"+Q}R.path=T.join(",")}var ne=p.headers=p.headers||{};p.subject&&(ne.subject=p.subject),p.body&&(ne.body=p.body);var fe=[];for(var J in ne)ne[J]!==Td[J]&&fe.push(J.replace(kt,gs).replace(kt,a).replace(va,V)+"="+ne[J].replace(kt,gs).replace(kt,a).replace(Md,V));return fe.length&&(R.query=fe.join("&")),R}},Fd=/^([^\:]+)\:(.*)/,_a={scheme:"urn",parse:function(p,$){var R=p.path&&p.path.match(Fd),T=p;if(R){var H=$.scheme||T.scheme||"urn",K=R[1].toLowerCase(),ee=R[2],ae=H+":"+($.nid||K),de=z[ae];T.nid=K,T.nss=ee,T.path=void 0,de&&(T=de.parse(T,$))}else T.error=T.error||"URN can not be parsed.";return T},serialize:function(p,$){var R=$.scheme||p.scheme||"urn",T=p.nid,H=R+":"+($.nid||T),K=z[H];K&&(p=K.serialize(p,$));var ee=p,ae=p.nss;return ee.path=(T||$.nid)+":"+ae,ee}},Ud=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,wa={scheme:"urn:uuid",parse:function(p,$){var R=p;return R.uuid=R.nss,R.nss=void 0,!$.tolerant&&(!R.uuid||!R.uuid.match(Ud))&&(R.error=R.error||"UUID is not valid."),R},serialize:function(p,$){var R=p;return R.nss=(p.uuid||"").toLowerCase(),R}};z[ht.scheme]=ht,z[ha.scheme]=ha,z[fr.scheme]=fr,z[ya.scheme]=ya,z[$a.scheme]=$a,z[_a.scheme]=_a,z[wa.scheme]=wa,r.SCHEMES=z,r.pctEncChar=V,r.pctDecChars=Y,r.parse=Pe,r.removeDotSegments=Le,r.serialize=Se,r.resolveComponents=Dt,r.resolve=lr,r.normalize=pt,r.equal=dr,r.escapeComponent=Yr,r.unescapeComponent=Te,Object.defineProperty(r,"__esModule",{value:!0})})})(dc,_r),Object.defineProperty(gn,"__esModule",{value:!0});const Zs=_r;Zs.code='require("ajv/dist/runtime/uri").default',gn.default=Zs,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ce;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=W;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Ht,s=Kt,o=at,a=be,c=W,f=ve,i=Vt,u=te,l=lc,w=gn,b=(U,P)=>new RegExp(U,P);b.code="new RegExp";const h=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function O(U){var P,D,N,d,v,A,z,V,Y,Z,ue,Ve,Ct,ar,ir,Pe,cr,jt,At,It,ur,Le,Se,Dt,lr;const pt=U.strict,dr=(P=U.code)===null||P===void 0?void 0:P.optimize,Yr=dr===!0||dr===void 0?1:dr||0,Te=(N=(D=U.code)===null||D===void 0?void 0:D.regExp)!==null&&N!==void 0?N:b,ht=(d=U.uriResolver)!==null&&d!==void 0?d:w.default;return{strictSchema:(A=(v=U.strictSchema)!==null&&v!==void 0?v:pt)!==null&&A!==void 0?A:!0,strictNumbers:(V=(z=U.strictNumbers)!==null&&z!==void 0?z:pt)!==null&&V!==void 0?V:!0,strictTypes:(Z=(Y=U.strictTypes)!==null&&Y!==void 0?Y:pt)!==null&&Z!==void 0?Z:"log",strictTuples:(Ve=(ue=U.strictTuples)!==null&&ue!==void 0?ue:pt)!==null&&Ve!==void 0?Ve:"log",strictRequired:(ar=(Ct=U.strictRequired)!==null&&Ct!==void 0?Ct:pt)!==null&&ar!==void 0?ar:!1,code:U.code?{...U.code,optimize:Yr,regExp:Te}:{optimize:Yr,regExp:Te},loopRequired:(ir=U.loopRequired)!==null&&ir!==void 0?ir:E,loopEnum:(Pe=U.loopEnum)!==null&&Pe!==void 0?Pe:E,meta:(cr=U.meta)!==null&&cr!==void 0?cr:!0,messages:(jt=U.messages)!==null&&jt!==void 0?jt:!0,inlineRefs:(At=U.inlineRefs)!==null&&At!==void 0?At:!0,schemaId:(It=U.schemaId)!==null&&It!==void 0?It:"$id",addUsedSchema:(ur=U.addUsedSchema)!==null&&ur!==void 0?ur:!0,validateSchema:(Le=U.validateSchema)!==null&&Le!==void 0?Le:!0,validateFormats:(Se=U.validateFormats)!==null&&Se!==void 0?Se:!0,unicodeRegExp:(Dt=U.unicodeRegExp)!==null&&Dt!==void 0?Dt:!0,int32range:(lr=U.int32range)!==null&&lr!==void 0?lr:!0,uriResolver:ht}}class j{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...O(P)};const{es5:D,lines:N}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:y,es5:D,lines:N}),this.logger=B(P.logger);const d=P.validateFormats;P.validateFormats=!1,this.RULES=(0,o.getRules)(),k.call(this,_,P,"NOT SUPPORTED"),k.call(this,m,P,"DEPRECATED","warn"),this._metaOpts=L.call(this),P.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&F.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),C.call(this),P.validateFormats=d}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:D,schemaId:N}=this.opts;let d=l;N==="id"&&(d={...l},d.id=d.$id,delete d.$id),D&&P&&this.addMetaSchema(d,d[N],!1)}defaultMeta(){const{meta:P,schemaId:D}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[D]||P:void 0}validate(P,D){let N;if(typeof P=="string"){if(N=this.getSchema(P),!N)throw new Error(`no schema with key or ref "${P}"`)}else N=this.compile(P);const d=N(D);return"$async"in N||(this.errors=N.errors),d}compile(P,D){const N=this._addSchema(P,D);return N.validate||this._compileSchemaEnv(N)}compileAsync(P,D){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:N}=this.opts;return d.call(this,P,D);async function d(Z,ue){await v.call(this,Z.$schema);const Ve=this._addSchema(Z,ue);return Ve.validate||A.call(this,Ve)}async function v(Z){Z&&!this.getSchema(Z)&&await d.call(this,{$ref:Z},!0)}async function A(Z){try{return this._compileSchemaEnv(Z)}catch(ue){if(!(ue instanceof s.default))throw ue;return z.call(this,ue),await V.call(this,ue.missingSchema),A.call(this,Z)}}function z({missingSchema:Z,missingRef:ue}){if(this.refs[Z])throw new Error(`AnySchema ${Z} is loaded but ${ue} cannot be resolved`)}async function V(Z){const ue=await Y.call(this,Z);this.refs[Z]||await v.call(this,ue.$schema),this.refs[Z]||this.addSchema(ue,Z,D)}async function Y(Z){const ue=this._loading[Z];if(ue)return ue;try{return await(this._loading[Z]=N(Z))}finally{delete this._loading[Z]}}}addSchema(P,D,N,d=this.opts.validateSchema){if(Array.isArray(P)){for(const A of P)this.addSchema(A,void 0,N,d);return this}let v;if(typeof P=="object"){const{schemaId:A}=this.opts;if(v=P[A],v!==void 0&&typeof v!="string")throw new Error(`schema ${A} must be string`)}return D=(0,f.normalizeId)(D||v),this._checkUnique(D),this.schemas[D]=this._addSchema(P,N,D,d,!0),this}addMetaSchema(P,D,N=this.opts.validateSchema){return this.addSchema(P,D,!0,N),this}validateSchema(P,D){if(typeof P=="boolean")return!0;let N;if(N=P.$schema,N!==void 0&&typeof N!="string")throw new Error("$schema must be a string");if(N=N||this.opts.defaultMeta||this.defaultMeta(),!N)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const d=this.validate(N,P);if(!d&&D){const v="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(v);else throw new Error(v)}return d}getSchema(P){let D;for(;typeof(D=S.call(this,P))=="string";)P=D;if(D===void 0){const{schemaId:N}=this.opts,d=new a.SchemaEnv({schema:{},schemaId:N});if(D=a.resolveSchema.call(this,d,P),!D)return;this.refs[P]=D}return D.validate||this._compileSchemaEnv(D)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const D=S.call(this,P);return typeof D=="object"&&this._cache.delete(D.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const D=P;this._cache.delete(D);let N=P[this.opts.schemaId];return N&&(N=(0,f.normalizeId)(N),delete this.schemas[N],delete this.refs[N]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const D of P)this.addKeyword(D);return this}addKeyword(P,D){let N;if(typeof P=="string")N=P,typeof D=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),D.keyword=N);else if(typeof P=="object"&&D===void 0){if(D=P,N=D.keyword,Array.isArray(N)&&!N.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(oe.call(this,N,D),!D)return(0,u.eachItem)(N,v=>Ne.call(this,v)),this;Tt.call(this,D);const d={...D,type:(0,i.getJSONTypes)(D.type),schemaType:(0,i.getJSONTypes)(D.schemaType)};return(0,u.eachItem)(N,d.type.length===0?v=>Ne.call(this,v,d):v=>d.type.forEach(A=>Ne.call(this,v,d,A))),this}getKeyword(P){const D=this.RULES.all[P];return typeof D=="object"?D.definition:!!D}removeKeyword(P){const{RULES:D}=this;delete D.keywords[P],delete D.all[P];for(const N of D.rules){const d=N.rules.findIndex(v=>v.keyword===P);d>=0&&N.rules.splice(d,1)}return this}addFormat(P,D){return typeof D=="string"&&(D=new RegExp(D)),this.formats[P]=D,this}errorsText(P=this.errors,{separator:D=", ",dataVar:N="data"}={}){return!P||P.length===0?"No errors":P.map(d=>`${N}${d.instancePath} ${d.message}`).reduce((d,v)=>d+D+v)}$dataMetaSchema(P,D){const N=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const d of D){const v=d.split("/").slice(1);let A=P;for(const z of v)A=A[z];for(const z in N){const V=N[z];if(typeof V!="object")continue;const{$data:Y}=V.definition,Z=A[z];Y&&Z&&(A[z]=Rt(Z))}}return P}_removeAllSchemas(P,D){for(const N in P){const d=P[N];(!D||D.test(N))&&(typeof d=="string"?delete P[N]:d&&!d.meta&&(this._cache.delete(d.schema),delete P[N]))}}_addSchema(P,D,N,d=this.opts.validateSchema,v=this.opts.addUsedSchema){let A;const{schemaId:z}=this.opts;if(typeof P=="object")A=P[z];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let V=this._cache.get(P);if(V!==void 0)return V;N=(0,f.normalizeId)(A||N);const Y=f.getSchemaRefs.call(this,P,N);return V=new a.SchemaEnv({schema:P,schemaId:z,meta:D,baseId:N,localRefs:Y}),this._cache.set(V.schema,V),v&&!N.startsWith("#")&&(N&&this._checkUnique(N),this.refs[N]=V),d&&this.validateSchema(P,!0),V}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):a.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const D=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,P)}finally{this.opts=D}}}e.default=j,j.ValidationError=n.default,j.MissingRefError=s.default;function k(U,P,D,N="error"){for(const d in U){const v=d;v in P&&this.logger[N](`${D}: option ${d}. ${U[v]}`)}}function S(U){return U=(0,f.normalizeId)(U),this.schemas[U]||this.refs[U]}function C(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const P in U)this.addSchema(U[P],P)}function M(){for(const U in this.opts.formats){const P=this.opts.formats[U];P&&this.addFormat(U,P)}}function F(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in U){const D=U[P];D.keyword||(D.keyword=P),this.addKeyword(D)}}function L(){const U={...this.opts};for(const P of h)delete U[P];return U}const x={log(){},warn(){},error(){}};function B(U){if(U===!1)return x;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const he=/^[a-z_$][a-z0-9_$:-]*$/i;function oe(U,P){const{RULES:D}=this;if((0,u.eachItem)(U,N=>{if(D.keywords[N])throw new Error(`Keyword ${N} is already defined`);if(!he.test(N))throw new Error(`Keyword ${N} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function Ne(U,P,D){var N;const d=P==null?void 0:P.post;if(D&&d)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:v}=this;let A=d?v.post:v.rules.find(({type:V})=>V===D);if(A||(A={type:D,rules:[]},v.rules.push(A)),v.keywords[U]=!0,!P)return;const z={keyword:U,definition:{...P,type:(0,i.getJSONTypes)(P.type),schemaType:(0,i.getJSONTypes)(P.schemaType)}};P.before?ft.call(this,A,z,P.before):A.rules.push(z),v.all[U]=z,(N=P.implements)===null||N===void 0||N.forEach(V=>this.addKeyword(V))}function ft(U,P,D){const N=U.rules.findIndex(d=>d.keyword===D);N>=0?U.rules.splice(N,0,P):(U.rules.push(P),this.logger.warn(`rule ${D} is not defined`))}function Tt(U){let{metaSchema:P}=U;P!==void 0&&(U.$data&&this.opts.$data&&(P=Rt(P)),U.validateSchema=this.compile(P,!0))}const or={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Rt(U){return{anyOf:[U,or]}}}(bs);var vn={},$n={},_n={};Object.defineProperty(_n,"__esModule",{value:!0});const fc={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};_n.default=fc;var ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.callRef=ut.getValidate=void 0;const pc=Kt,eo=X,Ee=W,_t=De,to=be,wr=te,hc={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:a,opts:c,self:f}=n,{root:i}=o;if((r==="#"||r==="#/")&&s===i.baseId)return l();const u=to.resolveRef.call(f,i,s,r);if(u===void 0)throw new pc.default(n.opts.uriResolver,s,r);if(u instanceof to.SchemaEnv)return w(u);return b(u);function l(){if(o===i)return br(e,a,o,o.$async);const h=t.scopeValue("root",{ref:i});return br(e,(0,Ee._)`${h}.validate`,i,i.$async)}function w(h){const y=ro(e,h);br(e,y,h,h.$async)}function b(h){const y=t.scopeValue("schema",c.code.source===!0?{ref:h,code:(0,Ee.stringify)(h)}:{ref:h}),_=t.name("valid"),m=e.subschema({schema:h,dataTypes:[],schemaPath:Ee.nil,topSchemaRef:y,errSchemaPath:r},_);e.mergeEvaluated(m),e.ok(_)}}};function ro(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ee._)`${r.scopeValue("wrapper",{ref:t})}.validate`}ut.getValidate=ro;function br(e,t,r,n){const{gen:s,it:o}=e,{allErrors:a,schemaEnv:c,opts:f}=o,i=f.passContext?_t.default.this:Ee.nil;n?u():l();function u(){if(!c.$async)throw new Error("async schema referenced by sync schema");const h=s.let("valid");s.try(()=>{s.code((0,Ee._)`await ${(0,eo.callValidateCode)(e,t,i)}`),b(t),a||s.assign(h,!0)},y=>{s.if((0,Ee._)`!(${y} instanceof ${o.ValidationError})`,()=>s.throw(y)),w(y),a||s.assign(h,!1)}),e.ok(h)}function l(){e.result((0,eo.callValidateCode)(e,t,i),()=>b(t),()=>w(t))}function w(h){const y=(0,Ee._)`${h}.errors`;s.assign(_t.default.vErrors,(0,Ee._)`${_t.default.vErrors} === null ? ${y} : ${_t.default.vErrors}.concat(${y})`),s.assign(_t.default.errors,(0,Ee._)`${_t.default.vErrors}.length`)}function b(h){var y;if(!o.opts.unevaluated)return;const _=(y=r==null?void 0:r.validate)===null||y===void 0?void 0:y.evaluated;if(o.props!==!0)if(_&&!_.dynamicProps)_.props!==void 0&&(o.props=wr.mergeEvaluated.props(s,_.props,o.props));else{const m=s.var("props",(0,Ee._)`${h}.evaluated.props`);o.props=wr.mergeEvaluated.props(s,m,o.props,Ee.Name)}if(o.items!==!0)if(_&&!_.dynamicItems)_.items!==void 0&&(o.items=wr.mergeEvaluated.items(s,_.items,o.items));else{const m=s.var("items",(0,Ee._)`${h}.evaluated.items`);o.items=wr.mergeEvaluated.items(s,m,o.items,Ee.Name)}}}ut.callRef=br,ut.default=hc,Object.defineProperty($n,"__esModule",{value:!0});const mc=_n,yc=ut,gc=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",mc.default,yc.default];$n.default=gc;var wn={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});const Er=W,nt=Er.operators,Sr={maximum:{okStr:"<=",ok:nt.LTE,fail:nt.GT},minimum:{okStr:">=",ok:nt.GTE,fail:nt.LT},exclusiveMaximum:{okStr:"<",ok:nt.LT,fail:nt.GTE},exclusiveMinimum:{okStr:">",ok:nt.GT,fail:nt.LTE}},vc={message:({keyword:e,schemaCode:t})=>(0,Er.str)`must be ${Sr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Er._)`{comparison: ${Sr[e].okStr}, limit: ${t}}`},$c={keyword:Object.keys(Sr),type:"number",schemaType:"number",$data:!0,error:vc,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Er._)`${r} ${Sr[t].fail} ${n} || isNaN(${r})`)}};bn.default=$c;var En={};Object.defineProperty(En,"__esModule",{value:!0});const Bt=W,_c={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,Bt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Bt._)`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,a=t.let("res"),c=o?(0,Bt._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,Bt._)`${a} !== parseInt(${a})`;e.fail$data((0,Bt._)`(${n} === 0 || (${a} = ${r}/${n}, ${c}))`)}};En.default=_c;var Sn={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});function no(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}Pn.default=no,no.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(Sn,"__esModule",{value:!0});const lt=W,wc=te,bc=Pn,Ec={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,lt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,lt._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?lt.operators.GT:lt.operators.LT,a=s.opts.unicode===!1?(0,lt._)`${r}.length`:(0,lt._)`${(0,wc.useFunc)(e.gen,bc.default)}(${r})`;e.fail$data((0,lt._)`${a} ${o} ${n}`)}};Sn.default=Ec;var On={};Object.defineProperty(On,"__esModule",{value:!0});const Sc=X,Pr=W,Pc={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,Pr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Pr._)`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,a=o.opts.unicodeRegExp?"u":"",c=r?(0,Pr._)`(new RegExp(${s}, ${a}))`:(0,Sc.usePattern)(e,n);e.fail$data((0,Pr._)`!${c}.test(${t})`)}};On.default=Pc;var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});const Gt=W,Oc={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,Gt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Gt._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?Gt.operators.GT:Gt.operators.LT;e.fail$data((0,Gt._)`Object.keys(${r}).length ${s} ${n}`)}};Nn.default=Oc;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});const Jt=X,Wt=W,Nc=te,Tc={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,Wt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Wt._)`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:a}=e,{opts:c}=a;if(!o&&r.length===0)return;const f=r.length>=c.loopRequired;if(a.allErrors?i():u(),c.strictRequired){const b=e.parentSchema.properties,{definedProperties:h}=e.it;for(const y of r)if((b==null?void 0:b[y])===void 0&&!h.has(y)){const _=a.schemaEnv.baseId+a.errSchemaPath,m=`required property "${y}" is not defined at "${_}" (strictRequired)`;(0,Nc.checkStrictMode)(a,m,a.opts.strictRequired)}}function i(){if(f||o)e.block$data(Wt.nil,l);else for(const b of r)(0,Jt.checkReportMissingProp)(e,b)}function u(){const b=t.let("missing");if(f||o){const h=t.let("valid",!0);e.block$data(h,()=>w(b,h)),e.ok(h)}else t.if((0,Jt.checkMissingProp)(e,r,b)),(0,Jt.reportMissingProp)(e,b),t.else()}function l(){t.forOf("prop",n,b=>{e.setParams({missingProperty:b}),t.if((0,Jt.noPropertyInData)(t,s,b,c.ownProperties),()=>e.error())})}function w(b,h){e.setParams({missingProperty:b}),t.forOf(b,n,()=>{t.assign(h,(0,Jt.propertyInData)(t,s,b,c.ownProperties)),t.if((0,Wt.not)(h),()=>{e.error(),t.break()})},Wt.nil)}}};Tn.default=Tc;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});const xt=W,Rc={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,xt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,xt._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?xt.operators.GT:xt.operators.LT;e.fail$data((0,xt._)`${r}.length ${s} ${n}`)}};Rn.default=Rc;var Cn={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});const so=As;so.code='require("ajv/dist/runtime/equal").default',Xt.default=so,Object.defineProperty(Cn,"__esModule",{value:!0});const jn=Vt,$e=W,Cc=te,jc=Xt,Ac={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,$e.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,$e._)`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:a,it:c}=e;if(!n&&!s)return;const f=t.let("valid"),i=o.items?(0,jn.getSchemaTypes)(o.items):[];e.block$data(f,u,(0,$e._)`${a} === false`),e.ok(f);function u(){const h=t.let("i",(0,$e._)`${r}.length`),y=t.let("j");e.setParams({i:h,j:y}),t.assign(f,!0),t.if((0,$e._)`${h} > 1`,()=>(l()?w:b)(h,y))}function l(){return i.length>0&&!i.some(h=>h==="object"||h==="array")}function w(h,y){const _=t.name("item"),m=(0,jn.checkDataTypes)(i,_,c.opts.strictNumbers,jn.DataType.Wrong),E=t.const("indices",(0,$e._)`{}`);t.for((0,$e._)`;${h}--;`,()=>{t.let(_,(0,$e._)`${r}[${h}]`),t.if(m,(0,$e._)`continue`),i.length>1&&t.if((0,$e._)`typeof ${_} == "string"`,(0,$e._)`${_} += "_"`),t.if((0,$e._)`typeof ${E}[${_}] == "number"`,()=>{t.assign(y,(0,$e._)`${E}[${_}]`),e.error(),t.assign(f,!1).break()}).code((0,$e._)`${E}[${_}] = ${h}`)})}function b(h,y){const _=(0,Cc.useFunc)(t,jc.default),m=t.name("outer");t.label(m).for((0,$e._)`;${h}--;`,()=>t.for((0,$e._)`${y} = ${h}; ${y}--;`,()=>t.if((0,$e._)`${_}(${r}[${h}], ${r}[${y}])`,()=>{e.error(),t.assign(f,!1).break(m)})))}}};Cn.default=Ac;var An={};Object.defineProperty(An,"__esModule",{value:!0});const In=W,Ic=te,Dc=Xt,kc={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,In._)`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,In._)`!${(0,Ic.useFunc)(t,Dc.default)}(${r}, ${s})`):e.fail((0,In._)`${o} !== ${r}`)}};An.default=kc;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});const Yt=W,Mc=te,Fc=Xt,Uc={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Yt._)`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:a}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const c=s.length>=a.opts.loopEnum;let f;const i=()=>f??(f=(0,Mc.useFunc)(t,Fc.default));let u;if(c||n)u=t.let("valid"),e.block$data(u,l);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const b=t.const("vSchema",o);u=(0,Yt.or)(...s.map((h,y)=>w(b,y)))}e.pass(u);function l(){t.assign(u,!1),t.forOf("v",o,b=>t.if((0,Yt._)`${i()}(${r}, ${b})`,()=>t.assign(u,!0).break()))}function w(b,h){const y=s[h];return typeof y=="object"&&y!==null?(0,Yt._)`${i()}(${r}, ${b}[${h}])`:(0,Yt._)`${r} === ${y}`}}};Dn.default=Uc,Object.defineProperty(wn,"__esModule",{value:!0});const zc=bn,Vc=En,Lc=Sn,qc=On,Hc=Nn,Kc=Tn,Bc=Rn,Gc=Cn,Jc=An,Wc=Dn,xc=[zc.default,Vc.default,Lc.default,qc.default,Hc.default,Kc.default,Bc.default,Gc.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Jc.default,Wc.default];wn.default=xc;var kn={},wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.validateAdditionalItems=void 0;const dt=W,Mn=te,Xc={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,dt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,dt._)`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Mn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}oo(e,n)}};function oo(e,t){const{gen:r,schema:n,data:s,keyword:o,it:a}=e;a.items=!0;const c=r.const("len",(0,dt._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,dt._)`${c} <= ${t.length}`);else if(typeof n=="object"&&!(0,Mn.alwaysValidSchema)(a,n)){const i=r.var("valid",(0,dt._)`${c} <= ${t.length}`);r.if((0,dt.not)(i),()=>f(i)),e.ok(i)}function f(i){r.forRange("i",t.length,c,u=>{e.subschema({keyword:o,dataProp:u,dataPropType:Mn.Type.Num},i),a.allErrors||r.if((0,dt.not)(i),()=>r.break())})}}wt.validateAdditionalItems=oo,wt.default=Xc;var Fn={},bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.validateTuple=void 0;const ao=W,Or=te,Yc=X,Qc={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return io(e,"additionalItems",t);r.items=!0,!(0,Or.alwaysValidSchema)(r,t)&&e.ok((0,Yc.validateArray)(e))}};function io(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:a,it:c}=e;u(s),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=Or.mergeEvaluated.items(n,r.length,c.items));const f=n.name("valid"),i=n.const("len",(0,ao._)`${o}.length`);r.forEach((l,w)=>{(0,Or.alwaysValidSchema)(c,l)||(n.if((0,ao._)`${i} > ${w}`,()=>e.subschema({keyword:a,schemaProp:w,dataProp:w},f)),e.ok(f))});function u(l){const{opts:w,errSchemaPath:b}=c,h=r.length,y=h===l.minItems&&(h===l.maxItems||l[t]===!1);if(w.strictTuples&&!y){const _=`"${a}" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,Or.checkStrictMode)(c,_,w.strictTuples)}}}bt.validateTuple=io,bt.default=Qc,Object.defineProperty(Fn,"__esModule",{value:!0});const Zc=bt,eu={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Zc.validateTuple)(e,"items")};Fn.default=eu;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});const co=W,tu=te,ru=X,nu=wt,su={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,co.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,co._)`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,tu.alwaysValidSchema)(n,t)&&(s?(0,nu.validateAdditionalItems)(e,s):e.ok((0,ru.validateArray)(e)))}};Un.default=su;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});const Oe=W,Nr=te,ou={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>t===void 0?(0,Oe.str)`must contain at least ${e} valid item(s)`:(0,Oe.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Oe._)`{minContains: ${e}}`:(0,Oe._)`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let a,c;const{minContains:f,maxContains:i}=n;o.opts.next?(a=f===void 0?1:f,c=i):a=1;const u=t.const("len",(0,Oe._)`${s}.length`);if(e.setParams({min:a,max:c}),c===void 0&&a===0){(0,Nr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&a>c){(0,Nr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Nr.alwaysValidSchema)(o,r)){let y=(0,Oe._)`${u} >= ${a}`;c!==void 0&&(y=(0,Oe._)`${y} && ${u} <= ${c}`),e.pass(y);return}o.items=!0;const l=t.name("valid");c===void 0&&a===1?b(l,()=>t.if(l,()=>t.break())):a===0?(t.let(l,!0),c!==void 0&&t.if((0,Oe._)`${s}.length > 0`,w)):(t.let(l,!1),w()),e.result(l,()=>e.reset());function w(){const y=t.name("_valid"),_=t.let("count",0);b(y,()=>t.if(y,()=>h(_)))}function b(y,_){t.forRange("i",0,u,m=>{e.subschema({keyword:"contains",dataProp:m,dataPropType:Nr.Type.Num,compositeRule:!0},y),_()})}function h(y){t.code((0,Oe._)`${y}++`),c===void 0?t.if((0,Oe._)`${y} >= ${a}`,()=>t.assign(l,!0).break()):(t.if((0,Oe._)`${y} > ${c}`,()=>t.assign(l,!1).break()),a===1?t.assign(l,!0):t.if((0,Oe._)`${y} >= ${a}`,()=>t.assign(l,!0)))}}};zn.default=ou;var uo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=W,r=te,n=X;e.error={message:({params:{property:f,depsCount:i,deps:u}})=>{const l=i===1?"property":"properties";return(0,t.str)`must have ${l} ${u} when property ${f} is present`},params:({params:{property:f,depsCount:i,deps:u,missingProperty:l}})=>(0,t._)`{property: ${f},
    missingProperty: ${l},
    depsCount: ${i},
    deps: ${u}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(f){const[i,u]=o(f);a(f,i),c(f,u)}};function o({schema:f}){const i={},u={};for(const l in f){if(l==="__proto__")continue;const w=Array.isArray(f[l])?i:u;w[l]=f[l]}return[i,u]}function a(f,i=f.schema){const{gen:u,data:l,it:w}=f;if(Object.keys(i).length===0)return;const b=u.let("missing");for(const h in i){const y=i[h];if(y.length===0)continue;const _=(0,n.propertyInData)(u,l,h,w.opts.ownProperties);f.setParams({property:h,depsCount:y.length,deps:y.join(", ")}),w.allErrors?u.if(_,()=>{for(const m of y)(0,n.checkReportMissingProp)(f,m)}):(u.if((0,t._)`${_} && (${(0,n.checkMissingProp)(f,y,b)})`),(0,n.reportMissingProp)(f,b),u.else())}}e.validatePropertyDeps=a;function c(f,i=f.schema){const{gen:u,data:l,keyword:w,it:b}=f,h=u.name("valid");for(const y in i)(0,r.alwaysValidSchema)(b,i[y])||(u.if((0,n.propertyInData)(u,l,y,b.opts.ownProperties),()=>{const _=f.subschema({keyword:w,schemaProp:y},h);f.mergeValidEvaluated(_,h)},()=>u.var(h,!0)),f.ok(h))}e.validateSchemaDeps=c,e.default=s})(uo);var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});const lo=W,au=te,iu={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,lo._)`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,au.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),t.if((0,lo.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};Vn.default=iu;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});const Rr=X,Ie=W,cu=De,Cr=te,uu={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,Ie._)`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:a}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:c,opts:f}=a;if(a.props=!0,f.removeAdditional!=="all"&&(0,Cr.alwaysValidSchema)(a,r))return;const i=(0,Rr.allSchemaProperties)(n.properties),u=(0,Rr.allSchemaProperties)(n.patternProperties);l(),e.ok((0,Ie._)`${o} === ${cu.default.errors}`);function l(){t.forIn("key",s,_=>{!i.length&&!u.length?h(_):t.if(w(_),()=>h(_))})}function w(_){let m;if(i.length>8){const E=(0,Cr.schemaRefOrVal)(a,n.properties,"properties");m=(0,Rr.isOwnProperty)(t,E,_)}else i.length?m=(0,Ie.or)(...i.map(E=>(0,Ie._)`${_} === ${E}`)):m=Ie.nil;return u.length&&(m=(0,Ie.or)(m,...u.map(E=>(0,Ie._)`${(0,Rr.usePattern)(e,E)}.test(${_})`))),(0,Ie.not)(m)}function b(_){t.code((0,Ie._)`delete ${s}[${_}]`)}function h(_){if(f.removeAdditional==="all"||f.removeAdditional&&r===!1){b(_);return}if(r===!1){e.setParams({additionalProperty:_}),e.error(),c||t.break();return}if(typeof r=="object"&&!(0,Cr.alwaysValidSchema)(a,r)){const m=t.name("valid");f.removeAdditional==="failing"?(y(_,m,!1),t.if((0,Ie.not)(m),()=>{e.reset(),b(_)})):(y(_,m),c||t.if((0,Ie.not)(m),()=>t.break()))}}function y(_,m,E){const O={keyword:"additionalProperties",dataProp:_,dataPropType:Cr.Type.Str};E===!1&&Object.assign(O,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(O,m)}}};Tr.default=uu;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});const lu=Ce,fo=X,qn=te,po=Tr,du={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&po.default.code(new lu.KeywordCxt(o,po.default,"additionalProperties"));const a=(0,fo.allSchemaProperties)(r);for(const l of a)o.definedProperties.add(l);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=qn.mergeEvaluated.props(t,(0,qn.toHash)(a),o.props));const c=a.filter(l=>!(0,qn.alwaysValidSchema)(o,r[l]));if(c.length===0)return;const f=t.name("valid");for(const l of c)i(l)?u(l):(t.if((0,fo.propertyInData)(t,s,l,o.opts.ownProperties)),u(l),o.allErrors||t.else().var(f,!0),t.endIf()),e.it.definedProperties.add(l),e.ok(f);function i(l){return o.opts.useDefaults&&!o.compositeRule&&r[l].default!==void 0}function u(l){e.subschema({keyword:"properties",schemaProp:l,dataProp:l},f)}}};Ln.default=du;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const ho=X,jr=W,mo=te,yo=te,fu={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:a}=o,c=(0,ho.allSchemaProperties)(r),f=c.filter(y=>(0,mo.alwaysValidSchema)(o,r[y]));if(c.length===0||f.length===c.length&&(!o.opts.unevaluated||o.props===!0))return;const i=a.strictSchema&&!a.allowMatchingProperties&&s.properties,u=t.name("valid");o.props!==!0&&!(o.props instanceof jr.Name)&&(o.props=(0,yo.evaluatedPropsToName)(t,o.props));const{props:l}=o;w();function w(){for(const y of c)i&&b(y),o.allErrors?h(y):(t.var(u,!0),h(y),t.if(u))}function b(y){for(const _ in i)new RegExp(y).test(_)&&(0,mo.checkStrictMode)(o,`property ${_} matches pattern ${y} (use allowMatchingProperties)`)}function h(y){t.forIn("key",n,_=>{t.if((0,jr._)`${(0,ho.usePattern)(e,y)}.test(${_})`,()=>{const m=f.includes(y);m||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:_,dataPropType:yo.Type.Str},u),o.opts.unevaluated&&l!==!0?t.assign((0,jr._)`${l}[${_}]`,!0):!m&&!o.allErrors&&t.if((0,jr.not)(u),()=>t.break())})})}}};Hn.default=fu;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});const pu=te,hu={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,pu.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Kn.default=hu;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});const mu={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:X.validateUnion,error:{message:"must match a schema in anyOf"}};Bn.default=mu;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});const Ar=W,yu=te,gu={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Ar._)`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,a=t.let("valid",!1),c=t.let("passing",null),f=t.name("_valid");e.setParams({passing:c}),t.block(i),e.result(a,()=>e.reset(),()=>e.error(!0));function i(){o.forEach((u,l)=>{let w;(0,yu.alwaysValidSchema)(s,u)?t.var(f,!0):w=e.subschema({keyword:"oneOf",schemaProp:l,compositeRule:!0},f),l>0&&t.if((0,Ar._)`${f} && ${a}`).assign(a,!1).assign(c,(0,Ar._)`[${c}, ${l}]`).else(),t.if(f,()=>{t.assign(a,!0),t.assign(c,l),w&&e.mergeEvaluated(w,Ar.Name)})})}}};Gn.default=gu;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});const vu=te,$u={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,a)=>{if((0,vu.alwaysValidSchema)(n,o))return;const c=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(c)})}};Jn.default=$u;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});const Ir=W,go=te,_u={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,Ir.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Ir._)`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,go.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=vo(n,"then"),o=vo(n,"else");if(!s&&!o)return;const a=t.let("valid",!0),c=t.name("_valid");if(f(),e.reset(),s&&o){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(c,i("then",u),i("else",u))}else s?t.if(c,i("then")):t.if((0,Ir.not)(c),i("else"));e.pass(a,()=>e.error(!0));function f(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);e.mergeEvaluated(u)}function i(u,l){return()=>{const w=e.subschema({keyword:u},c);t.assign(a,c),e.mergeValidEvaluated(w,a),l?t.assign(l,(0,Ir._)`${u}`):e.setParams({ifClause:u})}}}};function vo(e,t){const r=e.schema[t];return r!==void 0&&!(0,go.alwaysValidSchema)(e,r)}Wn.default=_u;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});const wu=te,bu={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,wu.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};xn.default=bu,Object.defineProperty(kn,"__esModule",{value:!0});const Eu=wt,Su=Fn,Pu=bt,Ou=Un,Nu=zn,Tu=uo,Ru=Vn,Cu=Tr,ju=Ln,Au=Hn,Iu=Kn,Du=Bn,ku=Gn,Mu=Jn,Fu=Wn,Uu=xn;function zu(e=!1){const t=[Iu.default,Du.default,ku.default,Mu.default,Fu.default,Uu.default,Ru.default,Cu.default,Tu.default,ju.default,Au.default];return e?t.push(Su.default,Ou.default):t.push(Eu.default,Pu.default),t.push(Nu.default),t}kn.default=zu;var Xn={},Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});const le=W,Vu={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,le.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,le._)`{format: ${e}}`},code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:a,it:c}=e,{opts:f,errSchemaPath:i,schemaEnv:u,self:l}=c;if(!f.validateFormats)return;s?w():b();function w(){const h=r.scopeValue("formats",{ref:l.formats,code:f.code.formats}),y=r.const("fDef",(0,le._)`${h}[${a}]`),_=r.let("fType"),m=r.let("format");r.if((0,le._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(_,(0,le._)`${y}.type || "string"`).assign(m,(0,le._)`${y}.validate`),()=>r.assign(_,(0,le._)`"string"`).assign(m,y)),e.fail$data((0,le.or)(E(),O()));function E(){return f.strictSchema===!1?le.nil:(0,le._)`${a} && !${m}`}function O(){const j=u.$async?(0,le._)`(${y}.async ? await ${m}(${n}) : ${m}(${n}))`:(0,le._)`${m}(${n})`,k=(0,le._)`(typeof ${m} == "function" ? ${j} : ${m}.test(${n}))`;return(0,le._)`${m} && ${m} !== true && ${_} === ${t} && !${k}`}}function b(){const h=l.formats[o];if(!h){E();return}if(h===!0)return;const[y,_,m]=O(h);y===t&&e.pass(j());function E(){if(f.strictSchema===!1){l.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${o}" ignored in schema at path "${i}"`}}function O(k){const S=k instanceof RegExp?(0,le.regexpCode)(k):f.code.formats?(0,le._)`${f.code.formats}${(0,le.getProperty)(o)}`:void 0,C=r.scopeValue("formats",{key:o,ref:k,code:S});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,le._)`${C}.validate`]:["string",k,C]}function j(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,le._)`await ${m}(${n})`}return typeof _=="function"?(0,le._)`${m}(${n})`:(0,le._)`${m}.test(${n})`}}}};Yn.default=Vu,Object.defineProperty(Xn,"__esModule",{value:!0});const Lu=[Yn.default];Xn.default=Lu;var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.contentVocabulary=Et.metadataVocabulary=void 0,Et.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Et.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(vn,"__esModule",{value:!0});const qu=$n,Hu=wn,Ku=kn,Bu=Xn,$o=Et,Gu=[qu.default,Hu.default,(0,Ku.default)(),Bu.default,$o.metadataVocabulary,$o.contentVocabulary];vn.default=Gu;var Qn={},_o={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(_o),Object.defineProperty(Qn,"__esModule",{value:!0});const St=W,Zn=_o,wo=be,Ju=te,Wu={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===Zn.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,St._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:a}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const c=n.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const f=t.let("valid",!1),i=t.const("tag",(0,St._)`${r}${(0,St.getProperty)(c)}`);t.if((0,St._)`typeof ${i} == "string"`,()=>u(),()=>e.error(!1,{discrError:Zn.DiscrError.Tag,tag:i,tagName:c})),e.ok(f);function u(){const b=w();t.if(!1);for(const h in b)t.elseIf((0,St._)`${i} === ${h}`),t.assign(f,l(b[h]));t.else(),e.error(!1,{discrError:Zn.DiscrError.Mapping,tag:i,tagName:c}),t.endIf()}function l(b){const h=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:b},h);return e.mergeEvaluated(y,St.Name),h}function w(){var b;const h={},y=m(s);let _=!0;for(let j=0;j<a.length;j++){let k=a[j];k!=null&&k.$ref&&!(0,Ju.schemaHasRulesButRef)(k,o.self.RULES)&&(k=wo.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,k==null?void 0:k.$ref),k instanceof wo.SchemaEnv&&(k=k.schema));const S=(b=k==null?void 0:k.properties)===null||b===void 0?void 0:b[c];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);_=_&&(y||m(k)),E(S,j)}if(!_)throw new Error(`discriminator: "${c}" must be required`);return h;function m({required:j}){return Array.isArray(j)&&j.includes(c)}function E(j,k){if(j.const)O(j.const,k);else if(j.enum)for(const S of j.enum)O(S,k);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function O(j,k){if(typeof j!="string"||j in h)throw new Error(`discriminator: "${c}" values must be unique strings`);h[j]=k}}}};Qn.default=Wu;const xu={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=bs,n=vn,s=Qn,o=xu,a=["/properties"],c="http://json-schema.org/draft-07/schema";class f extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(h=>this.addVocabulary(h)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const h=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(h,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}e.exports=t=f,Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=Ce;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return i.KeywordCxt}});var u=W;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var l=Ht;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return l.default}});var w=Kt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return w.default}})})(Fa,Ft);const bo=ws(Ft);var Dr={},Xu={get exports(){return Dr},set exports(e){Dr=e}},Eo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(F,L){return{validate:F,compare:L}}e.fullFormats={date:t(o,a),time:t(f,i),"date-time":t(l,w),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:y,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:M,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:m,int32:{type:"number",validate:j},int64:{type:"number",validate:k},float:{type:"number",validate:S},double:{type:"number",validate:S},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,i),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,w),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(F){return F%4===0&&(F%100!==0||F%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(F){const L=n.exec(F);if(!L)return!1;const x=+L[1],B=+L[2],he=+L[3];return B>=1&&B<=12&&he>=1&&he<=(B===2&&r(x)?29:s[B])}function a(F,L){if(F&&L)return F>L?1:F<L?-1:0}const c=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function f(F,L){const x=c.exec(F);if(!x)return!1;const B=+x[1],he=+x[2],oe=+x[3],Ne=x[5];return(B<=23&&he<=59&&oe<=59||B===23&&he===59&&oe===60)&&(!L||Ne!=="")}function i(F,L){if(!(F&&L))return;const x=c.exec(F),B=c.exec(L);if(x&&B)return F=x[1]+x[2]+x[3]+(x[4]||""),L=B[1]+B[2]+B[3]+(B[4]||""),F>L?1:F<L?-1:0}const u=/t|\s/i;function l(F){const L=F.split(u);return L.length===2&&o(L[0])&&f(L[1],!0)}function w(F,L){if(!(F&&L))return;const[x,B]=F.split(u),[he,oe]=L.split(u),Ne=a(x,he);if(Ne!==void 0)return Ne||i(B,oe)}const b=/\/|:/,h=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function y(F){return b.test(F)&&h.test(F)}const _=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function m(F){return _.lastIndex=0,_.test(F)}const E=-(2**31),O=2**31-1;function j(F){return Number.isInteger(F)&&F<=O&&F>=E}function k(F){return Number.isInteger(F)}function S(){return!0}const C=/[^\\]\\Z/;function M(F){if(C.test(F))return!1;try{return new RegExp(F),!0}catch{return!1}}})(Eo);var So={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Ft,r=W,n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:c,schemaCode:f})=>r.str`should be ${s[c].okStr} ${f}`,params:({keyword:c,schemaCode:f})=>r._`{comparison: ${s[c].okStr}, limit: ${f}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(c){const{gen:f,data:i,schemaCode:u,keyword:l,it:w}=c,{opts:b,self:h}=w;if(!b.validateFormats)return;const y=new t.KeywordCxt(w,h.RULES.all.format.definition,"format");y.$data?_():m();function _(){const O=f.scopeValue("formats",{ref:h.formats,code:b.code.formats}),j=f.const("fmt",r._`${O}[${y.schemaCode}]`);c.fail$data(r.or(r._`typeof ${j} != "object"`,r._`${j} instanceof RegExp`,r._`typeof ${j}.compare != "function"`,E(j)))}function m(){const O=y.schema,j=h.formats[O];if(!j||j===!0)return;if(typeof j!="object"||j instanceof RegExp||typeof j.compare!="function")throw new Error(`"${l}": format "${O}" does not define "compare" function`);const k=f.scopeValue("formats",{key:O,ref:j,code:b.code.formats?r._`${b.code.formats}${r.getProperty(O)}`:void 0});c.fail$data(E(k))}function E(O){return r._`${O}.compare(${i}, ${u}) ${s[l].fail} 0`}},dependencies:["format"]};const a=c=>(c.addKeyword(e.formatLimitDefinition),c);e.default=a})(So),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Eo,n=So,s=W,o=new s.Name("fullFormats"),a=new s.Name("fastFormats"),c=(i,u={keywords:!0})=>{if(Array.isArray(u))return f(i,u,r.fullFormats,o),i;const[l,w]=u.mode==="fast"?[r.fastFormats,a]:[r.fullFormats,o],b=u.formats||r.formatNames;return f(i,b,l,w),u.keywords&&n.default(i),i};c.get=(i,u="full")=>{const w=(u==="fast"?r.fastFormats:r.fullFormats)[i];if(!w)throw new Error(`Unknown format "${i}"`);return w};function f(i,u,l,w){var b,h;(b=(h=i.opts.code).formats)!==null&&b!==void 0||(h.formats=s._`require("ajv-formats/dist/formats").${w}`);for(const y of u)i.addFormat(y,l[y])}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c}(Xu,Dr);const Po=ws(Dr);function es(e,t){const r={};for(const[n]of Object.entries(t||{}))r[n]=e[n];return r}function Yu(e,t){var w,b,h;let r={},n={};const s=e.namespace||"",o=()=>s?t[s]||{}:t;function a(y){return y.replace(/^\//,"").replace(/\//g,".")}const c=(y,_)=>{const m=new bo({allErrors:!0,allowUnionTypes:!0});Po(m);const E=m.compile(y);if(!E(o())){const j=E.errors;if(!j)throw new Error("Unknown error");const k=j[0],S=new Error(k.message);throw S.namespace=s,S.params=k.params,S.property=k.params.missingProperty??a(k.instancePath),S}};if(e.server&&Object.keys(e.server).length>0){try{c(e.server,"server")}catch(_){throw _}const y=es(o(),e.server.properties);s?r[s]=y:r=y}if(e.client&&Object.keys(e.client).length>0){try{c(e.client,"client")}catch(_){throw _}const y=es(o(),e.client.properties);s?n[s]=y:n=y}if(e["*"]&&Object.keys(e["*"]).length>0){const y=es(o(),e["*"].properties);try{c(e["*"],"both")}catch(_){throw _}s?(r[s]={...r[s],...y},n[s]={...n[s],...y}):(r={...r,...y},n={...n,...y})}function f(y){if(y.type==="object"&&("additionalProperties"in y||(y.additionalProperties=!1),y.properties))for(const _ in y.properties)y.properties[_]=f(y.properties[_]);return y}function i(y,_){var j;const m=new bo({allErrors:!0,allowUnionTypes:!0});Po(m);const E=m.compile(f(y));if(E(_))return[];{const k=[];return(j=E.errors)==null||j.forEach(S=>{var C;if(S.keyword==="additionalProperties"){const M=a(S.instancePath),F=M+(M?".":"")+((C=S.params)==null?void 0:C.additionalProperty);k.push(F)}}),k}}const u={...((w=e.server)==null?void 0:w.properties)||{},...((b=e.client)==null?void 0:b.properties)||{},...((h=e["*"])==null?void 0:h.properties)||{}},l=i({type:"object",properties:u},o()).filter(y=>y!=="modules").map(y=>s?`${s}.${y}`:y);return{server:r,client:n,namespace:s,extraProps:l}}const Fe={yellow:e=>e,blue:e=>e,red:e=>e,dim:e=>e},Qu={compilerOptions:{type:"object",properties:{alias:{type:"object",additionalProperties:{type:"string"}},build:{type:"object",properties:{pwaEnabled:{type:"boolean"},assetsPath:{type:"string"},outputDir:{type:"string"},serverUrl:{type:"string"}}},spritesheetDirectories:{type:"array",items:{type:"string"}}}},vite:{type:"object",additionalProperties:!0}},Zu={canvas:{type:"object",properties:{transparent:{type:"boolean"},autoDensity:{type:"boolean"},antialias:{type:"boolean"},resolution:{type:"number"},preserveDrawingBuffer:{type:"boolean"},backgroundColor:{type:"number"}}},selector:{type:"string"},selectorGui:{type:"string"},selectorCanvas:{type:"string"},standalone:{type:"boolean"},drawMap:{type:"boolean"},maxFps:{type:"number"},serverFps:{type:"number"}},el={server:{type:"object",properties:{startMap:{type:"string"},start:{type:"object",properties:{map:{type:"string"},graphic:{type:"string"},hitbox:{type:"array",items:[{type:"integer"},{type:"integer"}],additionalItems:!1,minItems:2,maxItems:2}}},api:{type:"object",properties:{enabled:{type:"boolean"},authSecret:{type:"string"}},required:["enabled","authSecret"]},...Qu,...{express:{type:"object",properties:{static:{type:"string"},port:{type:"integer"},json:{type:"object",additionalProperties:!0},cors:{type:"object",additionalProperties:!0},socketIo:{type:"object",additionalProperties:!0}}}}}},client:{type:"object",properties:{shortName:{type:"string"},description:{type:"string"},themeColor:{type:"string"},icons:{type:"array",items:{type:"object",properties:{src:{type:"string"},sizes:{type:"array",items:{type:"number",minimum:0}},type:{type:"string"}}}},themeCss:{type:"string"},matchMakerService:{type:"string"},pwa:{type:"object",additionalProperties:!0},...Zu}},"*":{type:"object",properties:{inputs:{type:"object",additionalProperties:{oneOf:[{type:"object",properties:{repeat:{type:"boolean",default:!1},bind:{type:["string","array"]},delay:{type:"object",properties:{duration:{type:"number",minimum:0},otherControls:{type:"array",items:{type:"string"}}},required:["duration"]}},required:["bind"]}]}},name:{type:"string"}}}};function kr(e){console.log(Fe.yellow(`⚠️  Warning - ${e}`))}function tl(e){console.log(Fe.blue(`ℹ️  Info - ${e}`))}function rl(e){console.log(Fe.red(`❌  Error - ${e}`))}const nl=e=>{rl(`${e.response.status} - ${e.response.data.error}`)};function sl(e,t,r){let n={},s={},o=[];const a=r.side=="server",c=(i,u)=>{try{const l=Yu(i,t);l.server&&(s={...s,...l.server}),l.client&&(n={...n,...l.client}),l.extraProps&&(o=[...o,...l.extraProps])}catch(l){if(!l.property)throw console.log(l),l;if(!a)return!1;let w=Fe.red(`Invalidate "${u}" module: ${l.message}`),b=`[${l.namespace}]
  ${l.property} = YOUR_VALUE`;throw u||(w=Fe.red(`Invalidate config: ${l.message}`),b=`${l.property} = YOUR_VALUE`),console.log("----------"),console.log(w),l.params.allowedValues&&console.log(`
${Fe.dim("➜ Authorize values:")} ${Fe.dim(l.params.allowedValues.join(", "))}`),console.log(`${Fe.dim("➜")} ${Fe.dim(`you need to put the following configuration in rpg.toml:

${b}`)}`),console.log("----------"),l}};c(el);let f=[];for(let i of e){let u=i;u[0]!="."&&(u=ye.join("node_modules",u));const l=ye.resolve(process.cwd(),u,"config.json");if(pe.existsSync(l)){const w=pe.readFileSync(l,"utf-8"),b=JSON.parse(w);b.namespace&&f.push(b.namespace),c(b,i)}}if(a){const i=o.filter(u=>f.indexOf(u)==-1);if(i.length>0){kr("In rpg.toml, you put the following properties, but they are not used by the modules. Check the names of the properties.");for(let u of i)console.log(`  - ${Fe.yellow(u)}`)}}return{configClient:n,configServer:s}}const ts=()=>[],ol=e=>[...ts(),...ts(),...ts()],al=e=>ye.join(e,"assets");function Qt(e){return e.replace(/\\/g,"/")}function Oo(e){const{cwd:t}=process;return Qt("./"+Qt(ye.relative(t(),e)))}function No(e,t){const r=e.indexOf(t);if(r===-1)throw new Error("Project path not found in absolute path");return e.substring(r)}function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?To(Object(r),!0).forEach(function(n){il(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function il(e,t,r){return t=cl(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cl(e){var t=ul(e,"string");return typeof t=="symbol"?t:String(t)}function ul(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const We=Co({});function Co(e){return t.withOptions=r=>Co(Ro(Ro({},e),r)),t;function t(r,...n){const s=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:o=Array.isArray(r)}=e;let a="";for(let i=0;i<s.length;i++){let u=s[i];o&&(u=u.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),a+=u,i<n.length&&(a+=n[i])}const c=a.split(`
`);let f=null;for(const i of c){const u=i.match(/^(\s+)\S+/);if(u){const l=u[1].length;f?f=Math.min(f,l):f=l}}if(f!==null){const i=f;a=c.map(u=>u[0]===" "||u[0]==="	"?u.slice(i):u).join(`
`)}return a.trim().replace(/\\n/g,`
`)}}var jo=Object.freeze,ll=Object.defineProperty,dl=(e,t)=>jo(ll(e,"raw",{value:jo(t||e.slice())})),Ao;const Zt="virtual-modules",Mr="virtual-config-client",Fr="virtual-config-server",{cwd:er,exit:fl}=process;function Ur(e){return e=e.replace(/\./g,""),e.replace(/[.@\/ -]/g,"_")}function Io(e){return e.startsWith("@rpgjs")||e.startsWith("rpgjs")?"node_modules/"+e:e}function zr(e){const t=[],r=pe.readdirSync(e,{withFileTypes:!0});for(const n of r){const s=ye.join(e,n.name);if(n.isDirectory()){const o=zr(s);t.push(...o)}else t.push(s)}return t}function Ue(e,t,r,n,s){let o="";const a=ye.resolve(t,e);return pe.existsSync(a)?{variablesString:zr(a).filter(f=>typeof r=="string"?f.endsWith(r):r.some(i=>f.endsWith(i))).filter(f=>s!=null&&s.customFilter?s.customFilter(f):!0).map(f=>{const i=Oo(f),u=Ur(i);return o=o+`
import ${u} from '${i}'`,n?n(i,u):u}).join(","),importString:o,folder:a}:{variablesString:"",importString:"",folder:""}}function Pt(e,t,r){const n=ye.resolve(er(),Io(e),t+".ts");let s="";return pe.existsSync(n)&&(s=`import ${r||t} from '${e}/${t}.ts'`),s}function Do(e,t,r){var h,y,_;const{modulesCreated:n}=t;n.includes(e)||n.push(e);const s=Pt(e,"player"),o=Pt(e,"server"),a=Ue("maps",e,".ts"),c=Ue("maps",e,".tmx",(m,E)=>`
            {
                id: '${m.replace(".tmx","")}',
                file: ${E}
            }
        `,{customFilter:m=>{const E=m.replace(".tmx",".ts");return!pe.existsSync(E)}}),f=!!(c!=null&&c.variablesString),i=Ue("worlds",e,".world"),u=Ue("database",e,".ts"),l=Ue("events",e,".ts"),w=(h=r.start)==null?void 0:h.hitbox;return`
        import { type RpgServer, RpgModule } from '@rpgjs/server'
        ${c==null?void 0:c.importString}
        ${a==null?void 0:a.importString}
        ${i==null?void 0:i.importString}
        ${s||"const player = {}"}
        ${l==null?void 0:l.importString}
        ${u==null?void 0:u.importString}
        ${o}

        ${n.length==1?We`const _lastConnectedCb = player.onConnected
            player.onConnected = async (player) => {
                if (_lastConnectedCb) await _lastConnectedCb(player)
                if (!player.server.module.customHookExists('server.player.onAuth')) {
                    ${(y=r.start)!=null&&y.graphic?`player.setGraphic('${(_=r.start)==null?void 0:_.graphic}')`:""}
                    ${w?`player.setHitbox(${w[0]}, ${w[1]})`:""}
                    ${r.startMap?`await player.changeMap('${r.startMap}')`:""}
                }
            }`:""}
           
        @RpgModule<RpgServer>({ 
            player,
            events: [${l==null?void 0:l.variablesString}],
            ${o?"engine: server,":""}
            database: [${u==null?void 0:u.variablesString}],
            maps: [${c==null?void 0:c.variablesString}${f?",":""}${a==null?void 0:a.variablesString}],
            worldMaps: [${i==null?void 0:i.variablesString}] 
        })
        export default class RpgServerModuleEngine {} 
    `}function Vr(e,t,r,n=!1){const s=Ue(e,t,".ts");let o="";if(s!=null&&s.importString){const a=s.folder;let c="",f="";const i=a.replace(er(),"/");if(zr(a).filter(u=>[".png",".jpg",".jpeg",".gif",".bmp",".webp",".svg"].some(w=>u.toLowerCase().endsWith(w))).forEach(async u=>{const l=ye.basename(u),w=l.replace(ye.extname(u),"");if(r.serveMode===!1){const{outputDir:b="dist"}=r.config.compilerOptions.build,h=ye.join(b,al(r.type==="rpg"?"standalone":"client"),l);pe.copyFileSync(u,h)}f=u,c+=`"${w}": "${Qt(No(u,i.replace(/^\/+/,"")))}",
`}),!f)kr(`No spritesheet image found in ${e} folder`);else{const u=ka(f);o=`
            ${s==null?void 0:s.variablesString}.images = {
                ${c}
            }
            ${s==null?void 0:s.variablesString}.prototype.width = ${u.width}
            ${s==null?void 0:s.variablesString}.prototype.height = ${u.height}
        `}}else n&&kr(`No spritesheet folder found in ${e} folder`);return{...s,propImagesString:o}}function ko(e,t,r){const n=Pt(e,"scene-map","sceneMap"),s=Pt(e,"sprite"),o=Pt(e,"client","engine"),a=Ue("gui",e,".vue");let c=[];const f={config:r,...t};r.spritesheetDirectories&&(c=r.spritesheetDirectories.map(h=>Vr(h,e,f))),(r.spritesheetDirectories??[]).some(h=>h==="characters")||c.push(Vr("characters",e,f,!1));const i="spritesheets",u=ye.join(e,i);if(pe.existsSync(u)){const h=pe.readdirSync(u,{withFileTypes:!0});for(const y of h)y.isDirectory()&&c.push(Vr(ye.join(i,y.name),e,f))}const l=Ue("sounds",e,".ts"),w=Ue("sounds",e,[".mp3",".ogg"],void 0,{customFilter:h=>{const y=h.replace(/\.(mp3|ogg)$/,".ts");return!pe.existsSync(y)}}),b=!!(w!=null&&w.variablesString);return c=c.filter(h=>h.importString),We`
        import { type RpgClient, RpgModule } from '@rpgjs/client'
        ${s}
        ${n}
        ${o}
        ${c.map(h=>h.importString).join(`
`)}
        ${a==null?void 0:a.importString}
        ${w==null?void 0:w.importString}
        ${l==null?void 0:l.importString}

        ${c.map(h=>h.propImagesString).join(`
`)}
        
        @RpgModule<RpgClient>({ 
            spritesheets: [ ${c.map(h=>h.variablesString).join(`,
`)} ],
            sprite: ${s?"sprite":"{}"},
            ${o?"engine,":""}
            scenes: { ${n?"map: sceneMap":""} },
            gui: [${a==null?void 0:a.variablesString}],
            sounds: [${w==null?void 0:w.variablesString}${b?",":""}${l==null?void 0:l.variablesString}]
        })
        export default class RpgClientModuleEngine {}
    `}function Mo(e,t,r,n,s){const o=`virtual-${t}-client.ts`,a=`virtual-${t}-server.ts`;if(e.endsWith(a+"?server"))return Do(r,n,s);if(e.endsWith(o+"?client"))return ko(r,n,s);const c=ye.join(er(),e),f=ye.join(c,"package.json"),i=ye.join(c,"index.ts");if(pe.existsSync(f)){const{main:u}=JSON.parse(pe.readFileSync(f,"utf-8"));if(u){const l=Qt(ye.join(e,u));return We`
                import mod from '@/${l}'
                export default mod
            `}}else if(pe.existsSync(i)){const u=No(Qt(i),e);return We`
            import mod from '@/${u}'
            export default mod
        `}return We`
        import client from 'client!./${o}'
        import server from 'server!./${a}'
        
        export default {
            client,
            server
        } 
    `}function Fo(e,t,r){return e.endsWith(Fr)?`
            export default ${JSON.stringify(t)}
        `:e.endsWith(Mr)?`
            export default ${JSON.stringify(r)}
        `:null}function rs(e){return e.replace(/^.\//,"")}function pl(e={},t){var f,i,u;let r=[],n=[];const s=(i=(f=t.vite)==null?void 0:f.build)==null?void 0:i.lib;if(t.modules&&(r=t.modules),t.startMap=t.startMap||((u=t.start)==null?void 0:u.map),t.inputs&&e.server)for(let l in t.inputs){const w=t.inputs[l];(typeof w.bind=="string"?[w.bind]:w.bind).find(b=>["1","2","3","4"].includes(b))&&kr(`Input "${l}" : Note that 1, 2, 3 or 4 designates a direction. Use up, right, bottom or left instead. If you want the number key, use n1, n2, n<number>.`)}let o;try{o=sl(r,t,e)}catch{e.side=="server"&&fl()}if(!o)return;const{configClient:a,configServer:c}=o;return{name:"vite-plugin-config-toml",transformIndexHtml:{enforce:"pre",transform(l){const w=ye.resolve(er(),"src","client.ts"),b=pe.existsSync(w)?"mmorpg!./src/client.ts":"mmorpg!virtual-client.ts",h=ye.resolve(er(),"src","standalone.ts"),y=pe.existsSync(h)?"rpg!./src/standalone.ts":"rpg!virtual-standalone.ts";return l.replace("<head>",We(Ao||(Ao=dl([`
                <head>
                <script type="module">
                    import '`,`'
                    import '`,`'
                <\/script>`])),b,y))}},handleHotUpdate(){n=[]},async resolveId(l,w){if(l.endsWith(Zt)||l.endsWith(Mr)||l.endsWith(Fr))return l;for(let b of r)if(l===rs(b))return l;if(l.includes("virtual")&&!l.endsWith("virtual-server.ts")&&e.serveMode||l.includes("virtual")&&!e.serveMode)return l},async load(l){const{env:w}=process,b=w.VITE_SERVER_URL,h=`{
                VITE_BUILT: ${w.VITE_BUILT},
                VITE_SERVER_URL: ${b?"'"+b+"'":"undefined"},
                VITE_RPG_TYPE: '${e.type??"mmorpg"}',
                VITE_ASSETS_PATH: '${w.VITE_ASSETS_PATH??""}'
            }`;if(l.endsWith(Zt)){const _=r.reduce((m,E)=>{const O=Ur(E);return m[O]=E,m},{});return`
                ${Object.keys(_).map(m=>`import ${m} from '${rs(_[m])}'`).join(`
`)}

                export default [
                   ${Object.keys(_).join(`,
`)}
                ]
                `}else{if(l.endsWith("virtual-client.ts?mmorpg"))return We`
                import { entryPoint } from '@rpgjs/client'
                import io from 'socket.io-client'
                import modules from './${Zt}'
                import globalConfig from './${Mr}'

                document.addEventListener('DOMContentLoaded', function(e) { 
                    entryPoint(modules, { 
                        io,
                        globalConfig,
                        envs: ${h}
                    }).start()
                });
              `;if(l.endsWith("virtual-standalone.ts?rpg"))return We`
                import { entryPoint } from '@rpgjs/standalone'
                import globalConfigClient from './${Mr}'
                import globalConfigServer from './${Fr}'
                import modules from './${Zt}'

                ${s?`  window.global ||= window
                 
                    export default (extraModules = []) => {
                        return entryPoint([
                            ...modules,
                            ...extraModules
                        ], {
                            globalConfigClient,
                            globalConfigServer,
                            envs: ${h}
                        })
                    }
                 `:`document.addEventListener('DOMContentLoaded', async function() { 
                        window.RpgStandalone = await entryPoint(modules, {
                            globalConfigClient,
                            globalConfigServer,
                            envs: ${h}
                        }).start() 
                    })`}

              `;if(l.endsWith("virtual-server.ts"))return We`
                import { expressServer } from '@rpgjs/server/express'
                import * as url from 'url'
                import modules from './${Zt}'
                import globalConfig from './${Fr}'

                const __dirname = url.fileURLToPath(new URL('.', import.meta.url))

                expressServer(modules, {
                    globalConfig,
                    basePath: __dirname,
                    envs: ${h}
                })
              `}const y=Fo(l,c,a);if(y)return y;for(let _ of r){let m=rs(_),E=Ur(m);if(l.endsWith(m)||l.includes("virtual-"+E))return Mo(l,E,_,{...e,modulesCreated:n},t)}}}}const hl=Object.freeze(Object.defineProperty({__proto__:null,createConfigFiles:Fo,createModuleLoad:Mo,default:pl,formatVariableName:Ur,getAllFiles:zr,importString:Pt,loadClientFiles:ko,loadServerFiles:Do,loadSpriteSheet:Vr,searchFolderAndTransformToImportString:Ue,transformPathIfModule:Io},Symbol.toStringTag,{value:"Module"}));function ml(e={}){const{side:t="client",mode:r="development",type:n="mmorpg"}=e;async function s(a,c,f){const i=["client!","server!","rpg!","mmorpg!","production!","development!"];for(const u of i)if(a.startsWith(u)){const l=a.replace(u,""),w=await this.resolve(l,c,{skipSelf:!0,...f});return{...w,id:w.id+`?${u.replace("!","")}`}}}async function o(a,c){let f=a;return r==="test"?{code:f,map:null}:((c.endsWith(t==="client"?"?server":"?client")&&n!=="rpg"||c.endsWith("?production")&&r!=="production"||c.endsWith("?development")&&r!=="development"||c.endsWith("?rpg")&&n!=="rpg"||c.endsWith("?mmorpg")&&n!=="mmorpg")&&(f="export default null;"),{code:f,map:null})}return{name:"transform-flag",resolveId:s,transform:o}}function Uo(e,t){return function(){return e.apply(t,arguments)}}const{toString:yl}=Object.prototype,{getPrototypeOf:ns}=Object,Lr=(e=>t=>{const r=yl.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),xe=e=>(e=e.toLowerCase(),t=>Lr(t)===e),qr=e=>t=>typeof t===e,{isArray:Ot}=Array,tr=qr("undefined");function gl(e){return e!==null&&!tr(e)&&e.constructor!==null&&!tr(e.constructor)&&Xe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const zo=xe("ArrayBuffer");function vl(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&zo(e.buffer),t}const $l=qr("string"),Xe=qr("function"),Vo=qr("number"),ss=e=>e!==null&&typeof e=="object",_l=e=>e===!0||e===!1,Hr=e=>{if(Lr(e)!=="object")return!1;const t=ns(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wl=xe("Date"),bl=xe("File"),El=xe("Blob"),Sl=xe("FileList"),Pl=e=>ss(e)&&Xe(e.pipe),Ol=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Xe(e.append)&&((t=Lr(e))==="formdata"||t==="object"&&Xe(e.toString)&&e.toString()==="[object FormData]"))},Nl=xe("URLSearchParams"),Tl=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rr(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Ot(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let c;for(n=0;n<a;n++)c=o[n],t.call(null,e[c],c,e)}}function Lo(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const qo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ho=e=>!tr(e)&&e!==qo;function os(){const{caseless:e}=Ho(this)&&this||{},t={},r=(n,s)=>{const o=e&&Lo(t,s)||s;Hr(t[o])&&Hr(n)?t[o]=os(t[o],n):Hr(n)?t[o]=os({},n):Ot(n)?t[o]=n.slice():t[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&rr(arguments[n],r);return t}const Rl=(e,t,r,{allOwnKeys:n}={})=>(rr(t,(s,o)=>{r&&Xe(s)?e[o]=Uo(s,r):e[o]=s},{allOwnKeys:n}),e),Cl=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jl=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Al=(e,t,r,n)=>{let s,o,a;const c={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],(!n||n(a,e,t))&&!c[a]&&(t[a]=e[a],c[a]=!0);e=r!==!1&&ns(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Il=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Dl=e=>{if(!e)return null;if(Ot(e))return e;let t=e.length;if(!Vo(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},kl=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ns(Uint8Array)),Ml=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Fl=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Ul=xe("HTMLFormElement"),zl=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Ko=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Vl=xe("RegExp"),Bo=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};rr(r,(s,o)=>{t(s,o,e)!==!1&&(n[o]=s)}),Object.defineProperties(e,n)},Ll=e=>{Bo(e,(t,r)=>{if(Xe(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Xe(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ql=(e,t)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Ot(e)?n(e):n(String(e).split(t)),r},Hl=()=>{},Kl=(e,t)=>(e=+e,Number.isFinite(e)?e:t),as="abcdefghijklmnopqrstuvwxyz",Go="0123456789",Jo={DIGIT:Go,ALPHA:as,ALPHA_DIGIT:as+as.toUpperCase()+Go},Bl=(e=16,t=Jo.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Gl(e){return!!(e&&Xe(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const I={isArray:Ot,isArrayBuffer:zo,isBuffer:gl,isFormData:Ol,isArrayBufferView:vl,isString:$l,isNumber:Vo,isBoolean:_l,isObject:ss,isPlainObject:Hr,isUndefined:tr,isDate:wl,isFile:bl,isBlob:El,isRegExp:Vl,isFunction:Xe,isStream:Pl,isURLSearchParams:Nl,isTypedArray:kl,isFileList:Sl,forEach:rr,merge:os,extend:Rl,trim:Tl,stripBOM:Cl,inherits:jl,toFlatObject:Al,kindOf:Lr,kindOfTest:xe,endsWith:Il,toArray:Dl,forEachEntry:Ml,matchAll:Fl,isHTMLForm:Ul,hasOwnProperty:Ko,hasOwnProp:Ko,reduceDescriptors:Bo,freezeMethods:Ll,toObjectSet:ql,toCamelCase:zl,noop:Hl,toFiniteNumber:Kl,findKey:Lo,global:qo,isContextDefined:Ho,ALPHABET:Jo,generateString:Bl,isSpecCompliantForm:Gl,toJSONObject:e=>{const t=new Array(10),r=(n,s)=>{if(ss(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const o=Ot(n)?[]:{};return rr(n,(a,c)=>{const f=r(a,s+1);!tr(f)&&(o[c]=f)}),t[s]=void 0,o}}return n};return r(e,0)}};function re(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}I.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Wo=re.prototype,xo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xo[e]={value:e}}),Object.defineProperties(re,xo),Object.defineProperty(Wo,"isAxiosError",{value:!0}),re.from=(e,t,r,n,s,o)=>{const a=Object.create(Wo);return I.toFlatObject(e,a,function(f){return f!==Error.prototype},c=>c!=="isAxiosError"),re.call(a,e.message,t,r,n,s),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Jl=null;function is(e){return I.isPlainObject(e)||I.isArray(e)}function Xo(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function Yo(e,t,r){return e?e.concat(t).map(function(s,o){return s=Xo(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function Wl(e){return I.isArray(e)&&!e.some(is)}const xl=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function Kr(e,t,r){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=I.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!I.isUndefined(_[y])});const n=r.metaTokens,s=r.visitor||u,o=r.dots,a=r.indexes,f=(r.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function i(h){if(h===null)return"";if(I.isDate(h))return h.toISOString();if(!f&&I.isBlob(h))throw new re("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(h)||I.isTypedArray(h)?f&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,y,_){let m=h;if(h&&!_&&typeof h=="object"){if(I.endsWith(y,"{}"))y=n?y:y.slice(0,-2),h=JSON.stringify(h);else if(I.isArray(h)&&Wl(h)||(I.isFileList(h)||I.endsWith(y,"[]"))&&(m=I.toArray(h)))return y=Xo(y),m.forEach(function(O,j){!(I.isUndefined(O)||O===null)&&t.append(a===!0?Yo([y],j,o):a===null?y:y+"[]",i(O))}),!1}return is(h)?!0:(t.append(Yo(_,y,o),i(h)),!1)}const l=[],w=Object.assign(xl,{defaultVisitor:u,convertValue:i,isVisitable:is});function b(h,y){if(!I.isUndefined(h)){if(l.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));l.push(h),I.forEach(h,function(m,E){(!(I.isUndefined(m)||m===null)&&s.call(t,m,I.isString(E)?E.trim():E,y,w))===!0&&b(m,y?y.concat(E):[E])}),l.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Qo(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function cs(e,t){this._pairs=[],e&&Kr(e,this,t)}const Zo=cs.prototype;Zo.append=function(t,r){this._pairs.push([t,r])},Zo.toString=function(t){const r=t?function(n){return t.call(this,n,Qo)}:Qo;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Xl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ea(e,t,r){if(!t)return e;const n=r&&r.encode||Xl,s=r&&r.serialize;let o;if(s?o=s(t,r):o=I.isURLSearchParams(t)?t.toString():new cs(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Yl{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(n){n!==null&&t(n)})}}const ta=Yl,ra={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ql=typeof URLSearchParams<"u"?URLSearchParams:cs,Zl=typeof FormData<"u"?FormData:null,ed=typeof Blob<"u"?Blob:null,td=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),rd=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ze={isBrowser:!0,classes:{URLSearchParams:Ql,FormData:Zl,Blob:ed},isStandardBrowserEnv:td,isStandardBrowserWebWorkerEnv:rd,protocols:["http","https","file","blob","url","data"]};function nd(e,t){return Kr(e,new ze.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return ze.isNode&&I.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function sd(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function od(e){const t={},r=Object.keys(e);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],t[o]=e[o];return t}function na(e){function t(r,n,s,o){let a=r[o++];const c=Number.isFinite(+a),f=o>=r.length;return a=!a&&I.isArray(s)?s.length:a,f?(I.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!c):((!s[a]||!I.isObject(s[a]))&&(s[a]=[]),t(r,n,s[a],o)&&I.isArray(s[a])&&(s[a]=od(s[a])),!c)}if(I.isFormData(e)&&I.isFunction(e.entries)){const r={};return I.forEachEntry(e,(n,s)=>{t(sd(n),s,r,0)}),r}return null}const ad={"Content-Type":void 0};function id(e,t,r){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Br={transitional:ra,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=I.isObject(t);if(o&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return s&&s?JSON.stringify(na(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return nd(t,this.formSerializer).toString();if((c=I.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Kr(c?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),id(t)):t}],transformResponse:[function(t){const r=this.transitional||Br.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(t&&I.isString(t)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(c){if(a)throw c.name==="SyntaxError"?re.from(c,re.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ze.classes.FormData,Blob:ze.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],function(t){Br.headers[t]={}}),I.forEach(["post","put","patch"],function(t){Br.headers[t]=I.merge(ad)});const us=Br,cd=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ud=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||t[r]&&cd[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},sa=Symbol("internals");function nr(e){return e&&String(e).trim().toLowerCase()}function Gr(e){return e===!1||e==null?e:I.isArray(e)?e.map(Gr):String(e)}function ld(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const dd=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ls(e,t,r,n,s){if(I.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!I.isString(t)){if(I.isString(n))return t.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(t)}}function fd(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function pd(e,t){const r=I.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,o,a){return this[n].call(this,t,s,o,a)},configurable:!0})})}class Jr{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function o(c,f,i){const u=nr(f);if(!u)throw new Error("header name must be a non-empty string");const l=I.findKey(s,u);(!l||s[l]===void 0||i===!0||i===void 0&&s[l]!==!1)&&(s[l||f]=Gr(c))}const a=(c,f)=>I.forEach(c,(i,u)=>o(i,u,f));return I.isPlainObject(t)||t instanceof this.constructor?a(t,r):I.isString(t)&&(t=t.trim())&&!dd(t)?a(ud(t),r):t!=null&&o(r,t,n),this}get(t,r){if(t=nr(t),t){const n=I.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return ld(s);if(I.isFunction(r))return r.call(this,s,n);if(I.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=nr(t),t){const n=I.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||ls(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function o(a){if(a=nr(a),a){const c=I.findKey(n,a);c&&(!r||ls(n,n[c],c,r))&&(delete n[c],s=!0)}}return I.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!t||ls(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,n={};return I.forEach(this,(s,o)=>{const a=I.findKey(n,o);if(a){r[a]=Gr(s),delete r[o];return}const c=t?fd(o):String(o).trim();c!==o&&delete r[o],r[c]=Gr(s),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return I.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&I.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[sa]=this[sa]={accessors:{}}).accessors,s=this.prototype;function o(a){const c=nr(a);n[c]||(pd(s,a),n[c]=!0)}return I.isArray(t)?t.forEach(o):o(t),this}}Jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),I.freezeMethods(Jr.prototype),I.freezeMethods(Jr);const Ye=Jr;function ds(e,t){const r=this||us,n=t||r,s=Ye.from(n.headers);let o=n.data;return I.forEach(e,function(c){o=c.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function oa(e){return!!(e&&e.__CANCEL__)}function sr(e,t,r){re.call(this,e??"canceled",re.ERR_CANCELED,t,r),this.name="CanceledError"}I.inherits(sr,re,{__CANCEL__:!0});function hd(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new re("Request failed with status code "+r.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const md=ze.isStandardBrowserEnv?function(){return{write:function(r,n,s,o,a,c){const f=[];f.push(r+"="+encodeURIComponent(n)),I.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),I.isString(o)&&f.push("path="+o),I.isString(a)&&f.push("domain="+a),c===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function yd(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function gd(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function aa(e,t){return e&&!yd(t)?gd(e,t):t}const vd=ze.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(o){let a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const c=I.isString(a)?s(a):a;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}();function $d(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function _d(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,o=0,a;return t=t!==void 0?t:1e3,function(f){const i=Date.now(),u=n[o];a||(a=i),r[s]=f,n[s]=i;let l=o,w=0;for(;l!==s;)w+=r[l++],l=l%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),i-a<t)return;const b=u&&i-u;return b?Math.round(w*1e3/b):void 0}}function ia(e,t){let r=0;const n=_d(50,250);return s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,f=n(c),i=o<=a;r=o;const u={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:f||void 0,estimated:f&&a&&i?(a-o)/f:void 0,event:s};u[t?"download":"upload"]=!0,e(u)}}const Wr={http:Jl,xhr:typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(r,n){let s=e.data;const o=Ye.from(e.headers).normalize(),a=e.responseType;let c;function f(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}I.isFormData(s)&&(ze.isStandardBrowserEnv||ze.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let i=new XMLHttpRequest;if(e.auth){const b=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(b+":"+h))}const u=aa(e.baseURL,e.url);i.open(e.method.toUpperCase(),ea(u,e.params,e.paramsSerializer),!0),i.timeout=e.timeout;function l(){if(!i)return;const b=Ye.from("getAllResponseHeaders"in i&&i.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?i.responseText:i.response,status:i.status,statusText:i.statusText,headers:b,config:e,request:i};hd(function(m){r(m),f()},function(m){n(m),f()},y),i=null}if("onloadend"in i?i.onloadend=l:i.onreadystatechange=function(){!i||i.readyState!==4||i.status===0&&!(i.responseURL&&i.responseURL.indexOf("file:")===0)||setTimeout(l)},i.onabort=function(){i&&(n(new re("Request aborted",re.ECONNABORTED,e,i)),i=null)},i.onerror=function(){n(new re("Network Error",re.ERR_NETWORK,e,i)),i=null},i.ontimeout=function(){let h=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||ra;e.timeoutErrorMessage&&(h=e.timeoutErrorMessage),n(new re(h,y.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,e,i)),i=null},ze.isStandardBrowserEnv){const b=(e.withCredentials||vd(u))&&e.xsrfCookieName&&md.read(e.xsrfCookieName);b&&o.set(e.xsrfHeaderName,b)}s===void 0&&o.setContentType(null),"setRequestHeader"in i&&I.forEach(o.toJSON(),function(h,y){i.setRequestHeader(y,h)}),I.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),a&&a!=="json"&&(i.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&i.addEventListener("progress",ia(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&i.upload&&i.upload.addEventListener("progress",ia(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=b=>{i&&(n(!b||b.type?new sr(null,e,i):b),i.abort(),i=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const w=$d(u);if(w&&ze.protocols.indexOf(w)===-1){n(new re("Unsupported protocol "+w+":",re.ERR_BAD_REQUEST,e));return}i.send(s||null)})}};I.forEach(Wr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const wd={getAdapter:e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let r,n;for(let s=0;s<t&&(r=e[s],!(n=I.isString(r)?Wr[r.toLowerCase()]:r));s++);if(!n)throw n===!1?new re(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(I.hasOwnProp(Wr,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!I.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Wr};function fs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sr(null,e)}function ca(e){return fs(e),e.headers=Ye.from(e.headers),e.data=ds.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wd.getAdapter(e.adapter||us.adapter)(e).then(function(n){return fs(e),n.data=ds.call(e,e.transformResponse,n),n.headers=Ye.from(n.headers),n},function(n){return oa(n)||(fs(e),n&&n.response&&(n.response.data=ds.call(e,e.transformResponse,n.response),n.response.headers=Ye.from(n.response.headers))),Promise.reject(n)})}const ua=e=>e instanceof Ye?e.toJSON():e;function Nt(e,t){t=t||{};const r={};function n(i,u,l){return I.isPlainObject(i)&&I.isPlainObject(u)?I.merge.call({caseless:l},i,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function s(i,u,l){if(I.isUndefined(u)){if(!I.isUndefined(i))return n(void 0,i,l)}else return n(i,u,l)}function o(i,u){if(!I.isUndefined(u))return n(void 0,u)}function a(i,u){if(I.isUndefined(u)){if(!I.isUndefined(i))return n(void 0,i)}else return n(void 0,u)}function c(i,u,l){if(l in t)return n(i,u);if(l in e)return n(void 0,i)}const f={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(i,u)=>s(ua(i),ua(u),!0)};return I.forEach(Object.keys(e).concat(Object.keys(t)),function(u){const l=f[u]||s,w=l(e[u],t[u],u);I.isUndefined(w)&&l!==c||(r[u]=w)}),r}const la="1.3.6",ps={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ps[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const da={};ps.transitional=function(t,r,n){function s(o,a){return"[Axios v"+la+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,c)=>{if(t===!1)throw new re(s(a," has been removed"+(r?" in "+r:"")),re.ERR_DEPRECATED);return r&&!da[a]&&(da[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,c):!0}};function bd(e,t,r){if(typeof e!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],a=t[o];if(a){const c=e[o],f=c===void 0||a(c,o,e);if(f!==!0)throw new re("option "+o+" must be "+f,re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new re("Unknown option "+o,re.ERR_BAD_OPTION)}}const hs={assertOptions:bd,validators:ps},st=hs.validators;class xr{constructor(t){this.defaults=t,this.interceptors={request:new ta,response:new ta}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Nt(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&hs.assertOptions(n,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),s!=null&&(I.isFunction(s)?r.paramsSerializer={serialize:s}:hs.assertOptions(s,{encode:st.function,serialize:st.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a;a=o&&I.merge(o.common,o[r.method]),a&&I.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),r.headers=Ye.concat(a,o);const c=[];let f=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(f=f&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const i=[];this.interceptors.response.forEach(function(y){i.push(y.fulfilled,y.rejected)});let u,l=0,w;if(!f){const h=[ca.bind(this),void 0];for(h.unshift.apply(h,c),h.push.apply(h,i),w=h.length,u=Promise.resolve(r);l<w;)u=u.then(h[l++],h[l++]);return u}w=c.length;let b=r;for(l=0;l<w;){const h=c[l++],y=c[l++];try{b=h(b)}catch(_){y.call(this,_);break}}try{u=ca.call(this,b)}catch(h){return Promise.reject(h)}for(l=0,w=i.length;l<w;)u=u.then(i[l++],i[l++]);return u}getUri(t){t=Nt(this.defaults,t);const r=aa(t.baseURL,t.url);return ea(r,t.params,t.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(t){xr.prototype[t]=function(r,n){return this.request(Nt(n||{},{method:t,url:r,data:(n||{}).data}))}}),I.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,c){return this.request(Nt(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}xr.prototype[t]=r(),xr.prototype[t+"Form"]=r(!0)});const Xr=xr;class ms{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(c=>{n.subscribe(c),o=c}).then(s);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,c){n.reason||(n.reason=new sr(o,a,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new ms(function(s){t=s}),cancel:t}}}const Ed=ms;function Sd(e){return function(r){return e.apply(null,r)}}function Pd(e){return I.isObject(e)&&e.isAxiosError===!0}const ys={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ys).forEach(([e,t])=>{ys[t]=e});const Od=ys;function fa(e){const t=new Xr(e),r=Uo(Xr.prototype.request,t);return I.extend(r,Xr.prototype,t,{allOwnKeys:!0}),I.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return fa(Nt(e,s))},r}const ge=fa(us);ge.Axios=Xr,ge.CanceledError=sr,ge.CancelToken=Ed,ge.isCancel=oa,ge.VERSION=la,ge.toFormData=Kr,ge.AxiosError=re,ge.Cancel=ge.CanceledError,ge.all=function(t){return Promise.all(t)},ge.spread=Sd,ge.isAxiosError=Pd,ge.mergeConfig=Nt,ge.AxiosHeaders=Ye,ge.formToJSON=e=>na(I.isHTMLForm(e)?new FormData(e):e),ge.HttpStatusCode=Od,ge.default=ge;const pa=ge;pa.interceptors.request.use(function(e){return e.url+="?dev=1",e},function(e){return Promise.reject(e)});function Nd(e){function t(r,n){const s=Oo(n),o=ye.dirname(s);return r.basePath=o,r.id=s,r}return{name:"transform-world",transform(r,n){if(n.endsWith(".world")){const s=t(JSON.parse(r),n);return{code:`export default ${JSON.stringify(s)}`,map:null}}},configureServer(r){r.watcher.add(ol()),r.watcher.on("change",async n=>{if(n.endsWith("world")){tl(`File ${n} changed, updating world...`);const s=pe.readFileSync(n,"utf-8"),o=t(JSON.parse(s),n);pa.put(e+"/api/worlds",{worldId:o.id,data:o}).catch(nl)}})}}}Ze.autoLoad=hl,Ze.flagTransform=ml,Ze.worldTransformPlugin=Nd,Object.defineProperty(Ze,Symbol.toStringTag,{value:"Module"})});
